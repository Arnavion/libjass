/**
 * libjass
 *
 * https://github.com/Arnavion/libjass
 *
 * Copyright 2013 Arnav Singh
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @license
 */
!function(e,t){var r=this;"function"==typeof define&&define.amd?define([],function(){return t(r)}):"object"==typeof exports&&"object"==typeof module?module.exports=t(r):"object"==typeof exports?exports.libjass=t(r):e.libjass=t(r)}(this,function(e){"use strict";function t(e,t,r){i[e]={deps:t,body:r}}function r(e){if(e in n)return n[e];var t=n[e]=Object.create(null),o=i[e].deps.map(r);return o.push(t),i[e].body.apply(null,o),t}var n=Object.create(null),i=Object.create(null),o=function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};return t("index",["settings","settings","utility/set","utility/set","utility/map","utility/map","utility/promise","utility/promise","webworker/index","parts/index","parser/index","renderers/index","serialization","types/ass","types/attachment","types/dialogue","types/script-properties","types/style","types/misc","version"],function(e,t,r,n,i,o,a,s,l,u,p,c,f,h,d,_,g,y,m,v,b){function w(t){"boolean"==typeof t.debugMode&&e.setDebugMode(t.debugMode),"boolean"==typeof t.verboseMode&&e.setVerboseMode(t.verboseMode),"function"!=typeof t.Set&&null!==t.Set||r.setImplementation(t.Set),"function"!=typeof t.Map&&null!==t.Map||i.setImplementation(t.Map),"function"!=typeof t.Promise&&null!==t.Promise||a.setImplementation(t.Promise)}b.debugMode=t.debugMode,b.verboseMode=t.verboseMode,b.Set=n.Set,b.Map=o.Map,b.Promise=s.Promise,b.DeferredPromise=s.DeferredPromise,b.webworker=l,b.parts=u,b.parser=p,b.renderers=c,b.serialize=f.serialize,b.deserialize=f.deserialize,b.ASS=h.ASS,b.Attachment=d.Attachment,b.AttachmentType=d.AttachmentType,b.Dialogue=_.Dialogue,b.ScriptProperties=g.ScriptProperties,b.Style=y.Style,b.BorderStyle=m.BorderStyle,b.Format=m.Format,b.WrappingStyle=m.WrappingStyle,b.version=v.version,b.configure=w,Object.defineProperties(b,{debugMode:{get:function(){return e.debugMode},set:function(t){console.warn("Setter `libjass.debugMode = value` has been deprecated. Use `libjass.configure({ debugMode: value })` instead."),e.setDebugMode(t)}},verboseMode:{get:function(){return e.verboseMode},set:function(t){console.warn("Setter `libjass.verboseMode = value` has been deprecated. Use `libjass.configure({ verboseMode: value })` instead."),e.setVerboseMode(t)}},Set:{get:function(){return r.Set},set:function(e){console.warn("Setter `libjass.Set = value` has been deprecated. Use `libjass.configure({ Set: value })` instead."),r.setImplementation(e)}},Map:{get:function(){return i.Map},set:function(e){console.warn("Setter `libjass.Map = value` has been deprecated. Use `libjass.configure({ Map: value })` instead."),i.setImplementation(e)}},Promise:{get:function(){return a.Promise},set:function(e){console.warn("Setter `libjass.Promise = value` has been deprecated. Use `libjass.configure({ Promise: value })` instead."),a.setImplementation(e)}}})}),t("version",[],function(e){e.version=["0.12.1",0,12,1]}),t("renderers/index",["renderers/clocks/base","renderers/clocks/auto","renderers/clocks/manual","renderers/clocks/video","renderers/default","renderers/null","renderers/web/renderer","renderers/settings"],function(e,t,r,n,i,o,a,s,l){l.ClockEvent=e.ClockEvent,l.EventSource=e.EventSource,l.AutoClock=t.AutoClock,l.ManualClock=r.ManualClock,l.VideoClock=n.VideoClock,l.DefaultRenderer=i.DefaultRenderer,l.NullRenderer=o.NullRenderer,l.WebRenderer=a.WebRenderer,l.RendererSettings=s.RendererSettings}),t("renderers/default",["renderers/clocks/video","renderers/web/renderer"],function(e,t,r){var n=function(t){function r(r,n,i){t.call(this,n,new e.VideoClock(r),document.createElement("div"),i),this.e=r,this.e.parentElement.replaceChild(this.libjassSubsWrapper,this.e),this.libjassSubsWrapper.insertBefore(this.e,this.libjassSubsWrapper.firstElementChild)}return a(r,t),r.prototype.resize=function(){var e=this.e.videoWidth,r=this.e.videoHeight,n=this.e.offsetWidth,i=this.e.offsetHeight,o=Math.min(n/e,i/r),a=e*o,s=r*o,l=(n-a)/2,u=(i-s)/2;t.prototype.resize.call(this,a,s,l,u)},r.prototype.resizeVideo=function(){console.warn("`DefaultRenderer.resizeVideo(width, height)` has been deprecated. Use `DefaultRenderer.resize()` instead."),this.resize()},r.prototype.t=function(){this.resize(),t.prototype.t.call(this)},r}(t.WebRenderer);r.DefaultRenderer=n}),t("renderers/web/renderer",["parser/ttf","parts/index","settings","types/attachment","types/misc","utility/map","utility/mixin","utility/promise","renderers/clocks/base","renderers/null","renderers/web/animation-collection","renderers/web/drawing-styles","renderers/web/font-size","renderers/web/keyframe","renderers/web/span-styles"],function(t,r,n,i,o,s,l,u,p,c,f,h,d,_,g,y){var m=/^(url|local)\(["']?(.+?)["']?\)$/,v=function(l){function p(r,o,a,p){var c=this;l.call(this,r,o,function(){if(!(a instanceof HTMLDivElement)){var e=p;p=a,a=e,console.warn("WebRenderer's constructor now takes libjassSubsWrapper as the third parameter and settings as the fourth parameter. Please update the caller.")}return p}()),this.r=a,this.n=[],this.i=[],this.o=new s.Map,this.a=new s.Map,this.s=new s.Map,this.l=new s.Map,this.r.classList.add("libjass-wrapper"),this.u=document.createElement("div"),this.r.appendChild(this.u),this.u.className="libjass-subs",this.p=document.createElement("div"),this.r.appendChild(this.p),this.p.className="libjass-font-measure",this.p.appendChild(document.createTextNode("M")),n.debugMode&&console.log("Preloading fonts...");var f=[],h=new s.Map,d=null===this.settings.fontMap?new s.Map:this.settings.fontMap,_=new s.Map;this.settings.useAttachedFonts&&r.attachments.forEach(function(e){if(e.type===i.AttachmentType.Font){var r;try{r=t.getTtfNames(e)}catch(e){return void console.error(e)}var n="data:application/x-font-ttf;base64,"+e.contents;r.forEach(function(e){var t=d.get(e);if(void 0!==t)if("string"!=typeof t)t.push(n);else{var r=_.get(e);void 0===r&&_.set(e,r=[]),r.push(n)}else d.set(e,[n])})}}),d.forEach(function(t,r){var i;if(e.document.fonts&&e.document.fonts.add){var o="string"==typeof t?t:t.map(function(e){return null!==e.match(m)?e:'url("'+e+'")'}).join(", "),a=_.get(r);if(void 0!==a)for(var s=0,l=a;s<l.length;s++){var p=l[s];o+=', url("'+p+'")'}var d=[];e.document.fonts.forEach(function(e){e.family!==r&&e.family!=='"'+r+'"'||d.push(e)});var g=void 0;if(0===d.length){var y=new FontFace(r,o),v=new FontFace('"'+r+'"',o);e.document.fonts.add(y),e.document.fonts.add(v),g=u.any([y.load(),v.load()])}else g=u.any(d.map(function(e){return e.load()}));i=c.c(r,g.catch(function(e){return console.warn("Fetching fonts for "+r+" at "+o+" failed: %o",e),null}))}else{var b=("string"==typeof t?t.split(/,/):t).map(function(e){return e.trim()}).map(function(e){var t=e.match(m);return null===t?e:"local"===t[1]?null:t[2]}).filter(function(e){return null!==e}),a=_.get(r);void 0!==a&&(b=b.concat(a));var w=b.map(function(e){var t=h.get(e);return void 0===t&&(t=new u.Promise(function(t,r){var i=new XMLHttpRequest;i.addEventListener("load",function(){n.debugMode&&console.log("Preloaded "+e+"."),t(null)}),i.addEventListener("error",function(e){r(e)}),i.open("GET",e,!0),i.send()}),h.set(e,t)),t}),S=0===w.length?u.Promise.resolve(null):u.first(w).catch(function(e){return console.warn("Fetching fonts for "+r+" at "+b.join(", ")+" failed: %o",e),null});i=c.c(r,S)}f.push(i.then(function(e){return c.o.set(r,e)}))}),u.Promise.all(f).then(function(){n.debugMode&&console.log("All fonts have been preloaded."),c.t()})}return a(p,l),Object.defineProperty(p.prototype,"libjassSubsWrapper",{get:function(){return this.r},enumerable:!0,configurable:!0}),p.prototype.resize=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0),this.f(),this.u.style.width=e.toFixed(3)+"px",this.u.style.height=t.toFixed(3)+"px",this.u.style.left=r.toFixed(3)+"px",this.u.style.top=n.toFixed(3)+"px",this.h=e,this.d=e/this.ass.properties.resolutionX,this._=t/this.ass.properties.resolutionY,this.s.clear(),-1!==this.clock.currentTime&&this.g()},p.prototype.preRender=function(e){var t=this,i=this.clock.currentTime-e.start;if(e.containsTransformTag&&i<0)return null;var a=this.s.get(e.id);if(a)return a;var l=document.createElement("div");l.style.marginLeft=(this.d*e.style.marginLeft).toFixed(3)+"px",l.style.marginRight=(this.d*e.style.marginRight).toFixed(3)+"px",l.style.marginTop=l.style.marginBottom=(this._*e.style.marginVertical).toFixed(3)+"px",l.style.minWidth=(this.h-this.d*(e.style.marginLeft+e.style.marginRight)).toFixed(3)+"px";var u=document.createElement("style");u.id="libjass-animation-styles-"+this.id+"-"+e.id,u.type="text/css";var c=new f.AnimationCollection(this,u),d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("version","1.1"),d.setAttribute("class","libjass-filters"),d.width.baseVal.valueAsString="0",d.height.baseVal.valueAsString="0";var y=document.createElementNS("http://www.w3.org/2000/svg","defs");d.appendChild(y);var m=null,v=new g.SpanStyles(this,e,this.d,this._,this.settings,this.p,y,this.o),b=null,w=!1,S=function(e){null!==m&&m.hasChildNodes()&&l.appendChild(v.setStylesOnSpan(m,b)),null!==b&&b.animationDelays.forEach(function(e,t){return c.animationDelays.set(t,e)}),e&&(w?l.appendChild(v.makeNewLine()):l.appendChild(document.createElement("br"))),m=document.createElement("span"),b=new f.AnimationCollection(t,u),w=e};S(!1);for(var k=new h.DrawingStyles(this.d,this._),O=this.ass.properties.wrappingStyle,C=0,P=0,x=e.parts;P<x.length;P++){var E=x[P];if(E instanceof r.Italic)v.italic=E.value;else if(E instanceof r.Bold)v.bold=E.value;else if(E instanceof r.Underline)v.underline=E.value;else if(E instanceof r.StrikeThrough)v.strikeThrough=E.value;else if(E instanceof r.Border)v.outlineWidth=E.value,v.outlineHeight=E.value;else if(E instanceof r.BorderX)v.outlineWidth=E.value;else if(E instanceof r.BorderY)v.outlineHeight=E.value;else if(E instanceof r.Shadow)v.shadowDepthX=E.value,v.shadowDepthY=E.value;else if(E instanceof r.ShadowX)v.shadowDepthX=E.value;else if(E instanceof r.ShadowY)v.shadowDepthY=E.value;else if(E instanceof r.Blur)v.blur=E.value;else if(E instanceof r.GaussianBlur)v.gaussianBlur=E.value;else if(E instanceof r.FontName)v.fontName=E.value;else if(E instanceof r.FontSize)v.fontSize=E.value;else if(E instanceof r.FontSizePlus)v.fontSize=v.fontSize*(1+E.value);else if(E instanceof r.FontSizeMinus)v.fontSize=v.fontSize*(1-E.value);else if(E instanceof r.FontScaleX)v.fontScaleX=E.value;else if(E instanceof r.FontScaleY)v.fontScaleY=E.value;else if(E instanceof r.LetterSpacing)v.letterSpacing=E.value;else if(E instanceof r.RotateX)v.rotationX=E.value;else if(E instanceof r.RotateY)v.rotationY=E.value;else if(E instanceof r.RotateZ)v.rotationZ=E.value;else if(E instanceof r.SkewX)v.skewX=E.value;else if(E instanceof r.SkewY)v.skewY=E.value;else if(E instanceof r.PrimaryColor)v.primaryColor=E.value;else if(E instanceof r.SecondaryColor)v.secondaryColor=E.value;else if(E instanceof r.OutlineColor)v.outlineColor=E.value;else if(E instanceof r.ShadowColor)v.shadowColor=E.value;else if(E instanceof r.Alpha)v.primaryAlpha=E.value,v.secondaryAlpha=E.value,v.outlineAlpha=E.value,v.shadowAlpha=E.value;else if(E instanceof r.PrimaryAlpha)v.primaryAlpha=E.value;else if(E instanceof r.SecondaryAlpha)v.secondaryAlpha=E.value;else if(E instanceof r.OutlineAlpha)v.outlineAlpha=E.value;else if(E instanceof r.ShadowAlpha)v.shadowAlpha=E.value;else if(E instanceof r.Alignment);else if(E instanceof r.ColorKaraoke)S(!1),b.add("step-end",[new _.Keyframe(0,new s.Map([["color",v.secondaryColor.withAlpha(v.secondaryAlpha).toString()]])),new _.Keyframe(C,new s.Map([["color",v.primaryColor.withAlpha(v.primaryAlpha).toString()]]))]),C+=E.duration;else if(E instanceof r.WrappingStyle)O=E.value;else if(E instanceof r.Reset){var j=E.value;null===j?v.reset(null):v.reset(this.ass.styles.get(j))}else if(E instanceof r.Position)l.style.position="absolute",l.style.left=(this.d*E.x).toFixed(3)+"px",l.style.top=(this._*E.y).toFixed(3)+"px";else if(E instanceof r.Move)l.style.position="absolute",c.add("linear",[new _.Keyframe(0,new s.Map([["left",(this.d*E.x1).toFixed(3)+"px"],["top",(this._*E.y1).toFixed(3)+"px"]])),new _.Keyframe(E.t1,new s.Map([["left",(this.d*E.x1).toFixed(3)+"px"],["top",(this._*E.y1).toFixed(3)+"px"]])),new _.Keyframe(E.t2,new s.Map([["left",(this.d*E.x2).toFixed(3)+"px"],["top",(this._*E.y2).toFixed(3)+"px"]])),new _.Keyframe(e.end-e.start,new s.Map([["left",(this.d*E.x2).toFixed(3)+"px"],["top",(this._*E.y2).toFixed(3)+"px"]]))]);else if(E instanceof r.Fade)c.add("linear",[new _.Keyframe(0,new s.Map([["opacity","0"]])),new _.Keyframe(E.start,new s.Map([["opacity","1"]])),new _.Keyframe(e.end-e.start-E.end,new s.Map([["opacity","1"]])),new _.Keyframe(e.end-e.start,new s.Map([["opacity","0"]]))]);else if(E instanceof r.ComplexFade)c.add("linear",[new _.Keyframe(0,new s.Map([["opacity",E.a1.toFixed(3)]])),new _.Keyframe(E.t1,new s.Map([["opacity",E.a1.toFixed(3)]])),new _.Keyframe(E.t2,new s.Map([["opacity",E.a2.toFixed(3)]])),new _.Keyframe(E.t3,new s.Map([["opacity",E.a2.toFixed(3)]])),new _.Keyframe(E.t4,new s.Map([["opacity",E.a3.toFixed(3)]])),new _.Keyframe(e.end-e.start,new s.Map([["opacity",E.a3.toFixed(3)]]))]);else if(E instanceof r.Transform)for(var A=i<=E.start?0:i>=E.end?1:Math.pow((i-E.start)/(E.end-E.start),E.accel),M=0,F=E.tags;M<F.length;M++){var T=F[M];T instanceof r.Border?null!==T.value?(v.outlineWidth+=A*(T.value-v.outlineWidth),v.outlineHeight+=A*(T.value-v.outlineHeight)):(v.outlineWidth=null,v.outlineHeight=null):T instanceof r.BorderX?null!==T.value?v.outlineWidth+=A*(T.value-v.outlineWidth):v.outlineWidth=null:T instanceof r.BorderY?null!==T.value?v.outlineHeight+=A*(T.value-v.outlineHeight):v.outlineHeight=null:T instanceof r.Shadow?null!==T.value?(v.shadowDepthX+=A*(T.value-v.shadowDepthX),v.shadowDepthY+=A*(T.value-v.shadowDepthY)):(v.shadowDepthX=null,v.shadowDepthY=null):T instanceof r.ShadowX?null!==T.value?v.shadowDepthX+=A*(T.value-v.shadowDepthX):v.shadowDepthX=null:T instanceof r.ShadowY?null!==T.value?v.shadowDepthY+=A*(T.value-v.shadowDepthY):v.shadowDepthY=null:T instanceof r.Blur?null!==T.value?v.blur+=A*(T.value-v.blur):v.blur=null:T instanceof r.GaussianBlur?null!==T.value?v.gaussianBlur+=A*(T.value-v.gaussianBlur):v.gaussianBlur=null:T instanceof r.FontSize?null!==T.value?v.fontSize+=A*(T.value-v.fontSize):v.fontSize=null:T instanceof r.FontSizePlus?v.fontSize*=1+A*T.value:T instanceof r.FontSizeMinus?v.fontSize*=1-A*T.value:T instanceof r.FontScaleX?null!==T.value?v.fontScaleX+=A*(T.value-v.fontScaleX):v.fontScaleX=null:T instanceof r.FontScaleY?null!==T.value?v.fontScaleY+=A*(T.value-v.fontScaleY):v.fontScaleY=null:T instanceof r.LetterSpacing?null!==T.value?v.letterSpacing+=A*(T.value-v.letterSpacing):v.letterSpacing=null:T instanceof r.RotateX?null!==T.value?v.rotationX+=A*(T.value-v.rotationX):v.rotationX=null:T instanceof r.RotateY?null!==T.value?v.rotationY+=A*(T.value-v.rotationY):v.rotationY=null:T instanceof r.RotateZ?null!==T.value?v.rotationZ+=A*(T.value-v.rotationZ):v.rotationZ=null:T instanceof r.SkewX?null!==T.value?v.skewX+=A*(T.value-v.skewX):v.skewX=null:T instanceof r.SkewY?null!==T.value?v.skewY+=A*(T.value-v.skewY):v.skewY=null:T instanceof r.PrimaryColor?null!==T.value?v.primaryColor=v.primaryColor.interpolate(T.value,A):v.primaryColor=null:T instanceof r.SecondaryColor?null!==T.value?v.secondaryColor=v.secondaryColor.interpolate(T.value,A):v.secondaryColor=null:T instanceof r.OutlineColor?null!==T.value?v.outlineColor=v.outlineColor.interpolate(T.value,A):v.outlineColor=null:T instanceof r.ShadowColor?null!==T.value?v.shadowColor=v.shadowColor.interpolate(T.value,A):v.shadowColor=null:T instanceof r.Alpha?null!==T.value?(v.primaryAlpha+=A*(T.value-v.primaryAlpha),v.secondaryAlpha+=A*(T.value-v.secondaryAlpha),v.outlineAlpha+=A*(T.value-v.outlineAlpha),v.shadowAlpha+=A*(T.value-v.shadowAlpha)):(v.primaryAlpha=null,v.secondaryAlpha=null,v.outlineAlpha=null,v.shadowAlpha=null):T instanceof r.PrimaryAlpha?null!==T.value?v.primaryAlpha+=A*(T.value-v.primaryAlpha):v.primaryAlpha=null:T instanceof r.SecondaryAlpha?null!==T.value?v.secondaryAlpha+=A*(T.value-v.secondaryAlpha):v.secondaryAlpha=null:T instanceof r.OutlineAlpha?null!==T.value?v.outlineAlpha+=A*(T.value-v.outlineAlpha):v.outlineAlpha=null:T instanceof r.ShadowAlpha&&(null!==T.value?v.shadowAlpha+=A*(T.value-v.shadowAlpha):v.shadowAlpha=null)}else E instanceof r.DrawingMode?0!==E.scale&&(k.scale=E.scale):E instanceof r.DrawingBaselineOffset?k.baselineOffset=E.value:E instanceof r.DrawingInstructions?(m.appendChild(k.toSVG(E,v.primaryColor.withAlpha(v.primaryAlpha))),S(!1)):E instanceof r.Text?(m.appendChild(document.createTextNode(E.value+"\u200c")),S(!1)):n.debugMode&&E instanceof r.Comment?(m.appendChild(document.createTextNode(E.value)),S(!1)):E instanceof r.NewLine&&S(!0)}for(var D="",R=p.m[e.alignment],N=R[0]+"% "+R[1]+"%",W=0,X=e.parts;W<X.length;W++){var E=X[W];if(E instanceof r.Position||E instanceof r.Move){D="translate("+-R[0]+"%, "+-R[1]+"%) translate(-"+l.style.marginLeft+", -"+l.style.marginTop+")";break}}switch(0!==v.rotationY&&(D+=" rotateY("+v.rotationY+"deg)"),0!==v.rotationX&&(D+=" rotateX("+v.rotationX+"deg)"),0!==v.rotationZ&&(D+=" rotateZ("+-1*v.rotationZ+"deg)"),l.style.webkitTransform=D,l.style.transform=D,l.style.webkitTransformOrigin=N,l.style.transformOrigin=N,O){case o.WrappingStyle.EndOfLineWrapping:l.style.whiteSpace="pre-wrap";break;case o.WrappingStyle.NoLineWrapping:l.style.whiteSpace="pre";break;case o.WrappingStyle.SmartWrappingWithWiderTopLine:case o.WrappingStyle.SmartWrappingWithWiderBottomLine:l.style.whiteSpace="pre-wrap"}if(""!==l.style.position)switch(e.alignment){case 1:case 4:case 7:l.style.textAlign="left";break;case 2:case 5:case 8:l.style.textAlign="center";break;case 3:case 6:case 9:l.style.textAlign="right"}l.style.webkitAnimation=c.animationStyle,l.style.animation=c.animationStyle,l.setAttribute("data-dialogue-id",this.id+"-"+e.id),""!==u.textContent&&l.appendChild(u),y.hasChildNodes()&&l.appendChild(d);var V={sub:l,animationDelays:c.animationDelays};return e.containsTransformTag||this.s.set(e.id,V),V},p.prototype.draw=function(e){var t=this;if(!this.a.has(e)||e.containsTransformTag){n.debugMode&&console.log(e.toString());var r=this.s.get(e.id);void 0===r&&(r=this.preRender(e),n.debugMode&&console.log(e.toString()));var i=r,o=i.sub.cloneNode(!0),a=function(r){var n=r.style.animationName||r.style.webkitAnimationName||"";if(""!==n){var o=n.split(",").map(function(r){return r=r.trim(),((i.animationDelays.get(r)+e.start-t.clock.currentTime)/t.clock.rate).toFixed(3)+"s"}).join(", ");r.style.webkitAnimationDelay=o,r.style.animationDelay=o}};a(o);for(var s=o.querySelectorAll('[style*="animation:"]'),l=0;l<s.length;l++)a(s[l]);var u=e.layer,p="absolute"===o.style.position?0:e.alignment;if(void 0===this.n[u]){var c=document.createElement("div");c.className="layer layer"+u;for(var f=null,h=u+1;h<this.n.length&&null===f;h++)void 0!==this.n[h]&&(f=this.n[h]);this.u.insertBefore(c,f),this.n[u]=c,this.i[u]=[]}var d=this.i[u][p];if(void 0===d){d=this.i[u][p]=document.createElement("div"),d.className="an an"+p;for(var c=this.n[u],f=null,_=p+1;_<this.i[u].length&&null===f;_++)void 0!==this.i[u][_]&&(f=this.i[u][_]);c.insertBefore(d,f)}p>=1&&p<=3?d.insertBefore(o,d.firstElementChild):d.appendChild(o);var g=o.getElementsByTagName("style")[0];if(void 0!==g){var y=g.sheet;0===y.cssRules.length&&(y.cssText=g.textContent)}this.a.set(e,o)}},p.prototype.v=function(){l.prototype.v.call(this),this.f(),this.u.style.display="",this.u.classList.remove("paused")},p.prototype.g=function(){var e=this,t=this.clock.currentTime;this.a.forEach(function(r,n){(n.start>t||n.end<t||n.containsTransformTag)&&(e.a.delete(n),e.b(r))}),l.prototype.g.call(this)},p.prototype.w=function(){l.prototype.w.call(this),this.u.classList.add("paused")},p.prototype.S=function(){l.prototype.S.call(this),this.u.style.display="none"},p.prototype.k=function(){l.prototype.k.call(this),this.s.clear()},p.prototype.t=function(){this.O("ready",[])},p.prototype.c=function(e,t){var r=this;return t.then(function(){var t=r.p.cloneNode(!0);return r.r.appendChild(t),u.lastly(d.calculateFontMetrics(e,r.settings.fallbackFonts,t),function(){r.r.removeChild(t)})})},p.prototype.b=function(e){e.parentNode.removeChild(e)},p.prototype.f=function(){var e=this;this.a.forEach(function(t){return e.b(t)}),this.a.clear()},p.m=[[],[0,100],[50,100],[100,100],[0,50],[50,50],[100,50],[0,0],[50,0],[100,0]],p}(c.NullRenderer);y.WebRenderer=v,l.mixin(v,[p.EventSource])}),t("renderers/web/span-styles",["renderers/web/font-size"],function(e,t){function r(e){var t=document.createElementNS("http://www.w3.org/2000/svg","feComponentTransfer"),r=document.createElementNS("http://www.w3.org/2000/svg","feFuncR");t.appendChild(r),r.type.baseVal=SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR,r.slope.baseVal=0,r.intercept.baseVal=e.red/255;var n=document.createElementNS("http://www.w3.org/2000/svg","feFuncG");t.appendChild(n),n.type.baseVal=SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR,n.slope.baseVal=0,n.intercept.baseVal=e.green/255;var i=document.createElementNS("http://www.w3.org/2000/svg","feFuncB");t.appendChild(i),i.type.baseVal=SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR,i.slope.baseVal=0,i.intercept.baseVal=e.blue/255;var o=document.createElementNS("http://www.w3.org/2000/svg","feFuncA");return t.appendChild(o),o.type.baseVal=SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR,o.slope.baseVal=e.alpha,o.intercept.baseVal=0,t}function n(e,t){return null!==e?e:t}var i=function(){function t(e,t,r,n,i,o,a,s){this.d=r,this._=n,this.C=i,this.p=o,this.P=a,this.o=s,this.j=0,this.A=e.id+"-"+t.id,this.M=t.style,this.reset(null)}return t.prototype.reset=function(e){void 0!==e&&null!==e||(e=this.M),this.italic=e.italic,this.bold=e.bold,this.underline=e.underline,this.strikeThrough=e.strikeThrough,this.outlineWidth=e.outlineThickness,this.outlineHeight=e.outlineThickness,this.shadowDepthX=e.shadowDepth,this.shadowDepthY=e.shadowDepth,this.fontName=e.fontName,this.fontSize=e.fontSize,this.fontScaleX=e.fontScaleX,this.fontScaleY=e.fontScaleY,this.letterSpacing=e.letterSpacing,this.rotationX=0,this.rotationY=0,this.rotationZ=e.rotationZ,this.skewX=0,this.skewY=0,this.primaryColor=e.primaryColor,this.secondaryColor=e.secondaryColor,this.outlineColor=e.outlineColor,this.shadowColor=e.shadowColor,this.primaryAlpha=e.primaryColor.alpha,this.secondaryAlpha=e.secondaryColor.alpha,this.outlineAlpha=e.outlineColor.alpha,this.shadowAlpha=e.shadowColor.alpha,this.blur=null,this.gaussianBlur=null},t.prototype.setStylesOnSpan=function(t,r){var n=t.childNodes[0]instanceof Text,i="";this.F&&(i+="italic "),!0===this.T?i+="bold ":!1!==this.T&&(i+=this.T.toFixed(0)+" ");var o=this._*(n?this.D:1)*this.R,a=e.fontSizeForLineHeight(this.N,o,this.C.fallbackFonts,this.p,this.o),s=this.N;switch(s){case"cursive":case"fantasy":case"monospace":case"sans-serif":case"serif":break;default:s='"'+s+'"'}""!==this.C.fallbackFonts&&(s+=", "+this.C.fallbackFonts),t.style.font=""+i+a.toFixed(3)+"px/"+o.toFixed(3)+"px "+s;var l="";this.W&&(l="underline"),this.X&&(l+=" line-through"),t.style.textDecoration=l.trim();var u="";n?this.V!==this.D&&(u+="scaleY("+(this.V/this.D).toFixed(3)+") "):(1!==this.D&&(u+="scaleX("+this.D+") "),1!==this.V&&(u+="scaleY("+this.V+") ")),0===this.L&&0===this.I||(u+="matrix(1, "+this.I+", "+this.L+", 1, 0, 0) "),""!==u&&(t.style.webkitTransform=u,t.style.webkitTransformOrigin="50% 50%",t.style.transform=u,t.style.transformOrigin="50% 50%",t.style.display="inline-block"),t.style.letterSpacing=(this.d*this.Y).toFixed(3)+"px";var p=this.d*this.z,c=this._*this.B,f=this.d*this.G,h=this._*this.q,d=this.U.withAlpha(this.H),_=this.K.withAlpha(this.Z),g=this.J.withAlpha(this.$);return this.C.enableSvg||(0!==p||0!==c)&&_.alpha!==d.alpha||(0!==this.G||0!==this.q)&&g.alpha!==d.alpha||(d=this.U.withAlpha(1),_=this.K.withAlpha(1),g=this.J.withAlpha(1),t.style.opacity=this.H.toFixed(3)),t.style.color=d.toString(),this.C.enableSvg?this.Q(t,p,c,_,f,h,g):this.ee(t,p,c,_,f,h,g),0===this.te&&0===this.re||(t.style.display="inline-block"),t.style.webkitAnimation=r.animationStyle,t.style.animation=r.animationStyle,t},t.prototype.makeNewLine=function(){var e=document.createElement("br");return e.style.lineHeight=(this._*this.R).toFixed(3)+"px",e},t.prototype.Q=function(e,t,n,i,o,a,s){var l=document.createElementNS("http://www.w3.org/2000/svg","filter");if(t>0||n>0||o>0||a>0){var u=document.createElementNS("http://www.w3.org/2000/svg","feComponentTransfer");l.appendChild(u),u.in1.baseVal="SourceAlpha",u.result.baseVal="source";var p=document.createElementNS("http://www.w3.org/2000/svg","feFuncA");u.appendChild(p),p.type.baseVal=SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR,p.intercept.baseVal=0,p.slope.baseVal=0===this.H?1:1/this.H;var c=document.createElementNS("http://www.w3.org/2000/svg","feMerge");l.appendChild(c),c.result.baseVal="outline-alpha";var f=0,h=!this.C.preciseOutlines&&this.ne>0?this.ne:1;!function(e){if(t<=n)if(t>0){var r=void 0;for(r=0;r<=t;r+=h)e(r,n/t*Math.sqrt(t*t-r*r));r!==t+h&&e(t,0)}else e(0,n);else if(n>0){var i=void 0;for(i=0;i<=n;i+=h)e(t/n*Math.sqrt(n*n-i*i),i);i!==n+h&&e(0,n)}else e(t,0)}(function(e,t){var r="outline"+f,n=document.createElementNS("http://www.w3.org/2000/svg","feMorphology");l.insertBefore(n,c),n.in1.baseVal="source",n.operator.baseVal=SVGFEMorphologyElement.SVG_MORPHOLOGY_OPERATOR_DILATE,n.radiusX.baseVal=e,n.radiusY.baseVal=t,n.result.baseVal=r;var i=document.createElementNS("http://www.w3.org/2000/svg","feMergeNode");c.appendChild(i),i.in1.baseVal=r,f++}),function(e){t%1>0&&(e(t,0),e(-t,0)),n%1>0&&(e(0,n),e(0,-n))}(function(e,t){var r="outline"+f,n=document.createElementNS("http://www.w3.org/2000/svg","feOffset");l.insertBefore(n,c),n.in1.baseVal="source",n.dx.baseVal=e,n.dy.baseVal=t,n.result.baseVal=r;var i=document.createElementNS("http://www.w3.org/2000/svg","feMergeNode");c.appendChild(i),i.in1.baseVal=r,f++});var d=r(i);if(l.appendChild(d),d.in1.baseVal="outline-alpha",this.ne>0){var _=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur");l.appendChild(_),_.stdDeviationX.baseVal=this.ne,_.stdDeviationY.baseVal=this.ne}for(var g=0;g<this.ie;g++){var y=document.createElementNS("http://www.w3.org/2000/svg","feConvolveMatrix");l.appendChild(y),y.setAttribute("kernelMatrix","1 2 1 2 4 2 1 2 1"),y.edgeMode.baseVal=SVGFEConvolveMatrixElement.SVG_EDGEMODE_NONE}var m=document.createElementNS("http://www.w3.org/2000/svg","feComposite");if(l.appendChild(m),m.in2.baseVal="source",m.operator.baseVal=SVGFECompositeElement.SVG_FECOMPOSITE_OPERATOR_OUT,m.result.baseVal="outline-colored",o>0||a>0){var v=document.createElementNS("http://www.w3.org/2000/svg","feOffset");l.appendChild(v),v.in1.baseVal="outline-alpha",v.dx.baseVal=o,v.dy.baseVal=a;var b=r(s);l.appendChild(b);var w=b;if(this.ne>0){var _=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur");l.appendChild(_),_.stdDeviationX.baseVal=this.ne,_.stdDeviationY.baseVal=this.ne,w=_}for(var g=0;g<this.ie;g++){var y=document.createElementNS("http://www.w3.org/2000/svg","feConvolveMatrix");l.appendChild(y),y.setAttribute("kernelMatrix","1 2 1 2 4 2 1 2 1"),y.edgeMode.baseVal=SVGFEConvolveMatrixElement.SVG_EDGEMODE_NONE,w=y}w.result.baseVal="shadow"}var S=document.createElementNS("http://www.w3.org/2000/svg","feMerge");if(l.appendChild(S),o>0||a>0){var k=document.createElementNS("http://www.w3.org/2000/svg","feMergeNode");S.appendChild(k),k.in1.baseVal="shadow"}var O=document.createElementNS("http://www.w3.org/2000/svg","feMergeNode");S.appendChild(O),O.in1.baseVal="outline-colored";var C=document.createElementNS("http://www.w3.org/2000/svg","feMergeNode");S.appendChild(C),C.in1.baseVal="SourceGraphic"}else{if(this.ne>0){var _=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur");l.appendChild(_),_.stdDeviationX.baseVal=this.ne,_.stdDeviationY.baseVal=this.ne}for(var g=0;g<this.ie;g++){var y=document.createElementNS("http://www.w3.org/2000/svg","feConvolveMatrix");l.appendChild(y),y.setAttribute("kernelMatrix","1 2 1 2 4 2 1 2 1"),y.edgeMode.baseVal=SVGFEConvolveMatrixElement.SVG_EDGEMODE_NONE}}if(l.childElementCount>0){var P="libjass-svg-filter-"+this.A+"-"+this.j++;this.P.appendChild(l),l.id=P,l.x.baseVal.valueAsString="-50%",l.width.baseVal.valueAsString="200%",l.y.baseVal.valueAsString="-50%",l.height.baseVal.valueAsString="200%";var x='url("#'+P+'")';e.style.webkitFilter=x,e.style.filter=x}},t.prototype.ee=function(e,t,r,n,i,o,a){var s=this;if(t>0||r>0){var l="",u="";!function(e){for(var n=0;n<=t;n++)for(var i=0===t?r:r*Math.sqrt(1-n*n/(t*t)),o=0;o<=i;o++)e(n,o),0!==n&&e(-n,o),0!==o&&e(n,-o),0!==n&&0!==o&&e(-n,-o);t%1>0&&(e(t,0),e(-t,0)),r%1>0&&(e(0,r),e(0,-r))}(function(e,t){l+=", "+n.toString()+" "+e.toFixed(3)+"px "+t.toFixed(3)+"px "+s.ne.toFixed(3)+"px",0===s.G&&0===s.q||(u+=", "+a.toString()+" "+(e+i).toFixed(3)+"px "+(t+o).toFixed(3)+"px "+s.ne.toFixed(3)+"px")}),e.style.textShadow=(l+u).substr(", ".length)}else if(0!==this.G||0!==this.q){var p=a.toString()+" "+i.toFixed(3)+"px "+o.toFixed(3)+"px 0px";""===e.style.textShadow?e.style.textShadow=p:e.style.textShadow+=", "+p}},Object.defineProperty(t.prototype,"italic",{set:function(e){this.F=n(e,this.M.italic)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bold",{set:function(e){this.T=n(e,this.M.bold)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"underline",{set:function(e){this.W=n(e,this.M.underline)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strikeThrough",{set:function(e){this.X=n(e,this.M.strikeThrough)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlineWidth",{get:function(){return this.z},set:function(e){this.z=n(e,this.M.outlineThickness)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlineHeight",{get:function(){return this.B},set:function(e){this.B=n(e,this.M.outlineThickness)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowDepthX",{get:function(){return this.G},set:function(e){this.G=n(e,this.M.shadowDepth)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowDepthY",{get:function(){return this.q},set:function(e){this.q=n(e,this.M.shadowDepth)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blur",{get:function(){return this.ie},set:function(e){this.ie=n(e,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gaussianBlur",{get:function(){return this.ne},set:function(e){this.ne=n(e,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{set:function(e){this.N=n(e,this.M.fontName)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this.R},set:function(e){this.R=n(e,this.M.fontSize)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontScaleX",{get:function(){return this.D},set:function(e){this.D=n(e,this.M.fontScaleX)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontScaleY",{get:function(){return this.V},set:function(e){this.V=n(e,this.M.fontScaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this.Y},set:function(e){this.Y=n(e,this.M.letterSpacing)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationX",{get:function(){return this.te},set:function(e){this.te=n(e,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationY",{get:function(){return this.re},set:function(e){this.re=n(e,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationZ",{get:function(){return this.oe},set:function(e){this.oe=n(e,this.M.rotationZ)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skewX",{get:function(){return this.L},set:function(e){this.L=n(e,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skewY",{get:function(){return this.I},set:function(e){this.I=n(e,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"primaryColor",{get:function(){return this.U},set:function(e){this.U=n(e,this.M.primaryColor)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"secondaryColor",{get:function(){return this.ae},set:function(e){this.ae=n(e,this.M.secondaryColor)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlineColor",{get:function(){return this.K},set:function(e){this.K=n(e,this.M.outlineColor)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{get:function(){return this.J},set:function(e){this.J=n(e,this.M.shadowColor)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"primaryAlpha",{get:function(){return this.H},set:function(e){this.H=n(e,this.M.primaryColor.alpha)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"secondaryAlpha",{get:function(){return this.se},set:function(e){this.se=n(e,this.M.secondaryColor.alpha)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlineAlpha",{get:function(){return this.Z},set:function(e){this.Z=n(e,this.M.outlineColor.alpha)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowAlpha",{get:function(){return this.$},set:function(e){this.$=n(e,this.M.shadowColor.alpha)},enumerable:!0,configurable:!0}),t}();t.SpanStyles=i}),t("renderers/web/font-size",["utility/promise"],function(e,t){function r(e,t,r,n){var i='"'+e+'"';""!==r&&(i+=", "+r),n.style.fontFamily=i,n.style.fontSize=t+"px"}function n(t,n,i,o){return r(t,n,i,o),new e.Promise(function(e){return setTimeout(function(){return e(o.offsetHeight)},1e3)})}function i(e,t,n,i){return r(e,t,n,i),i.offsetHeight}function o(e,t){return[e,180/(t-e)]}function a(e,t,r){return n(e,180,t,r).then(function(i){return n(e,360,t,r).then(function(e){return o(i,e)})})}function s(e,t,r){return 180+(e-t)*r}function l(e,t,r,n,a){var l=a.get(e);if(void 0===l){var u=i(e,180,r,n),p=i(e,360,r,n);a.set(e,l=o(u,p))}return s(t,l[0],l[1])}t.calculateFontMetrics=a,t.fontSizeForLineHeight=l}),t("renderers/web/drawing-styles",["parts/index"],function(e,t){var r=function(){function t(e,t){this.le=e,this.ue=t,this.pe=1,this.ce=0}return Object.defineProperty(t.prototype,"scale",{set:function(e){this.pe=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baselineOffset",{set:function(e){this.ce=e},enumerable:!0,configurable:!0}),t.prototype.toSVG=function(t,r){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(n.setAttribute("version","1.1"),0===t.instructions.length)return n;for(var i=Math.pow(2,this.pe-1),o=this.le/i,a=this.ue/i,s=document.createElementNS("http://www.w3.org/2000/svg","path"),l="",u=1/0,p=-1/0,c=1/0,f=-1/0,h=0,d=t.instructions;h<d.length;h++){var _=d[h];_ instanceof e.drawing.MoveInstruction?(l+=" M "+_.x.toFixed(3)+" "+(_.y+this.ce).toFixed(3),u=Math.min(u,_.x),p=Math.max(p,_.x),c=Math.min(c,_.y+this.ce),f=Math.max(f,_.y+this.ce)):_ instanceof e.drawing.LineInstruction?(l+=" L "+_.x.toFixed(3)+" "+(_.y+this.ce).toFixed(3),u=Math.min(u,_.x),p=Math.max(p,_.x),c=Math.min(c,_.y+this.ce),f=Math.max(f,_.y+this.ce)):_ instanceof e.drawing.CubicBezierCurveInstruction&&(l+=" C "+_.x1.toFixed(3)+" "+(_.y1+this.ce).toFixed(3)+" "+_.x2.toFixed(3)+" "+(_.y2+this.ce).toFixed(3)+" "+_.x3.toFixed(3)+" "+(_.y3+this.ce).toFixed(3),u=Math.min(u,_.x1,_.x2,_.x3),p=Math.max(p,_.x1,_.x2,_.x3),c=Math.min(c,_.y1+this.ce,_.y2+this.ce,_.y3+this.ce),f=Math.max(f,_.y1+this.ce,_.y2+this.ce,_.y3+this.ce))}u*=o,p*=o,c*=a,f*=a;var g=p-u,y=f-c;n.width.baseVal.valueAsString=g.toFixed(3)+"px",n.height.baseVal.valueAsString=y.toFixed(3)+"px",n.setAttribute("viewBox",u+" "+c+" "+g+" "+y),n.style.position="relative",n.style.left=u.toFixed(3)+"px",n.style.top=c.toFixed(3)+"px";var m=document.createElementNS("http://www.w3.org/2000/svg","g");return n.appendChild(m),m.setAttribute("transform","scale("+o.toFixed(3)+" "+a.toFixed(3)+")"),m.appendChild(s),s.setAttribute("d",l),s.setAttribute("fill",r.toString()),n},t}();t.DrawingStyles=r}),t("renderers/web/animation-collection",["utility/map"],function(e,t){var r=function(){function t(r,n){this.fe=n,this.he="",this.de=new e.Map,this._e=0,this.A=r.id+"-"+t.ge++,this.ye=r.clock.rate}return Object.defineProperty(t.prototype,"animationStyle",{get:function(){return this.he},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animationDelays",{get:function(){return this.de},enumerable:!0,configurable:!0}),t.prototype.add=function(e,t){for(var r=null,n=null,i=0,o=t;i<o.length;i++){var a=o[i];null===r&&(r=a.time),n=a.time}if(null===r||null===n)throw new Error("Atleast one keyframe must be provided.");for(var s="",l=0,u=t;l<u.length;l++){var a=u[l];s+="\t"+(100*(n-r==0?1:(a.time-r)/(n-r))).toFixed(3)+"% {\n",a.properties.forEach(function(e,t){s+="\t\t"+t+": "+e+";\n"}),s+="\t}\n"}var p="animation-"+this.A+"-"+this._e++;this.fe.appendChild(document.createTextNode("@-webkit-keyframes "+p+" {\n"+s+"\n}")),this.fe.appendChild(document.createTextNode("@keyframes "+p+" {\n"+s+"\n}")),""!==this.he&&(this.he+=","),this.he+=p+" "+((n-r)/this.ye).toFixed(3)+"s "+e,this.de.set(p,r)},t.ge=0,t}();t.AnimationCollection=r}),t("renderers/web/keyframe",[],function(e){var t=function(){function e(e,t){this.me=e,this.ve=t}return Object.defineProperty(e.prototype,"time",{get:function(){return this.me},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.ve},enumerable:!0,configurable:!0}),e}();e.Keyframe=t}),t("renderers/null",["settings","renderers/clocks/base","renderers/settings"],function(e,t,r,n){var i=function(){function n(e,i,o){var a=this;this.be=e,this.we=i,this.A=++n.Se,this.C=r.RendererSettings.from(o),this.we.addEventListener(t.ClockEvent.Play,function(){return a.v()}),this.we.addEventListener(t.ClockEvent.Tick,function(){return a.g()}),this.we.addEventListener(t.ClockEvent.Pause,function(){return a.w()}),this.we.addEventListener(t.ClockEvent.Stop,function(){return a.S()}),this.we.addEventListener(t.ClockEvent.RateChange,function(){return a.k()})}return Object.defineProperty(n.prototype,"id",{get:function(){return this.A},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ass",{get:function(){return this.be},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"clock",{get:function(){return this.we},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"settings",{get:function(){return this.C},enumerable:!0,configurable:!0}),n.prototype.preRender=function(){},n.prototype.draw=function(){},n.prototype.enable=function(){return this.we.enable()},n.prototype.disable=function(){return this.we.disable()},n.prototype.toggle=function(){this.we.toggle()},n.prototype.setEnabled=function(e){return this.we.setEnabled(e)},Object.defineProperty(n.prototype,"enabled",{get:function(){return this.we.enabled},enumerable:!0,configurable:!0}),n.prototype.v=function(){e.verboseMode&&console.log("NullRenderer._onClockPlay")},n.prototype.g=function(){var t=this.we.currentTime;e.verboseMode&&console.log("NullRenderer._onClockTick: currentTime = "+t);for(var r=0,n=this.be.dialogues;r<n.length;r++){var i=n[r];try{i.end>t&&(i.start<=t?this.draw(i):i.start<=t+this.C.preRenderTime&&this.preRender(i))}catch(t){e.debugMode&&console.error("Rendering dialogue "+i.id+" failed.",t)}}},n.prototype.w=function(){e.verboseMode&&console.log("NullRenderer._onClockPause")},n.prototype.S=function(){e.verboseMode&&console.log("NullRenderer._onClockStop")},n.prototype.k=function(){e.verboseMode&&console.log("NullRenderer._onClockRateChange")},n.Se=-1,n}();n.NullRenderer=i}),t("parser/ttf",["utility/map","utility/set"],function(e,t,r){function n(e){for(var r=atob(e.contents),n=new Uint8Array(new ArrayBuffer(r.length)),i=0;i<r.length;i++)n[i]=r.charCodeAt(i);for(var o={dataView:new DataView(n.buffer),position:0},a=u.read(o),s=null,i=0;i<a.numTables;i++){var l=p.read(o);if(l.c1+l.c2+l.c3+l.c4==="name"){s=l;break}}if(null===s)throw new Error('Could not find "name" table record.');o.position=s.offset;for(var h=c.read(o),d=new t.Set,i=0;i<h.count;i++){var _=f.read(o);switch(_.nameId){case 1:case 4:case 6:var g=s.offset+h.stringOffset+_.offset,y=n.subarray(g,g+_.length);switch(_.platformId){case 1:for(var m="",v=0;v<y.length;v++)m+=String.fromCharCode(y[v]);d.add(m);break;case 3:for(var b="",v=0;v<y.length;v+=2)b+=String.fromCharCode((y[v]<<8)+y[v+1]);d.add(b)}}}return d}function i(e){var t=e.ke;return e.read=function(r){for(var n=new e,i=0,o=t;i<o.length;i++){var a=o[i],l=void 0;switch(a.type){case s.Char:l=String.fromCharCode(r.dataView.getInt8(r.position)),r.position+=1;break;case s.Uint16:l=r.dataView.getUint16(r.position),r.position+=2;break;case s.Uint32:l=r.dataView.getUint32(r.position),r.position+=4}n[a.field]=l}return n},e}function a(e){var t=l.get(e);return void 0===t&&(t=function(t,r){var n=t.constructor;void 0===n.ke&&(n.ke=[]),n.ke.push({type:e,field:r})},l.set(e,t)),t}var s;!function(e){e[e.Char=0]="Char",e[e.Uint16=1]="Uint16",e[e.Uint32=2]="Uint32"}(s||(s={}));var l=new e.Map,u=function(){function e(){}return o([a(s.Uint16)],e.prototype,"majorVersion",void 0),o([a(s.Uint16)],e.prototype,"minorVersion",void 0),o([a(s.Uint16)],e.prototype,"numTables",void 0),o([a(s.Uint16)],e.prototype,"searchRange",void 0),o([a(s.Uint16)],e.prototype,"entrySelector",void 0),o([a(s.Uint16)],e.prototype,"rangeShift",void 0),e=o([i],e)}(),p=function(){function e(){}return o([a(s.Char)],e.prototype,"c1",void 0),o([a(s.Char)],e.prototype,"c2",void 0),o([a(s.Char)],e.prototype,"c3",void 0),o([a(s.Char)],e.prototype,"c4",void 0),o([a(s.Uint32)],e.prototype,"checksum",void 0),o([a(s.Uint32)],e.prototype,"offset",void 0),o([a(s.Uint32)],e.prototype,"length",void 0),e=o([i],e)}(),c=function(){function e(){}return o([a(s.Uint16)],e.prototype,"formatSelector",void 0),o([a(s.Uint16)],e.prototype,"count",void 0),o([a(s.Uint16)],e.prototype,"stringOffset",void 0),e=o([i],e)}(),f=function(){function e(){}return o([a(s.Uint16)],e.prototype,"platformId",void 0),o([a(s.Uint16)],e.prototype,"encodingId",void 0),o([a(s.Uint16)],e.prototype,"languageId",void 0),o([a(s.Uint16)],e.prototype,"nameId",void 0),o([a(s.Uint16)],e.prototype,"length",void 0),o([a(s.Uint16)],e.prototype,"offset",void 0),e=o([i],e)}();r.getTtfNames=n}),t("renderers/settings",["settings","utility/map"],function(e,t,r){function n(e){return e.type===CSSRule.FONT_FACE_RULE}function i(){if(e.debugMode&&console.log("Testing whether SVG filter effects are supported."),"undefined"==typeof document)return e.debugMode&&console.log("This doesn't look like a browser. Assuming it doesn't support SVG filter effects."),!1;var t=document.createElementNS("http://www.w3.org/2000/svg","feMorphology");try{t.radiusX.baseVal=1}catch(t){if(e.debugMode)if(t instanceof DOMException){var r=t;r.code===DOMException.NO_MODIFICATION_ALLOWED_ERR?console.log("Setting SVGFEMorphologyElement.radiusX.baseVal threw NoModificationAllowedError. This browser doesn't support SVG DOM correctly."):console.log("Setting SVGFEMorphologyElement.radiusX.baseVal threw unexpected DOMException code "+r.code+". This browser doesn't support SVG DOM correctly.")}else console.log("Setting SVGFEMorphologyElement.radiusX.baseVal threw unexpected exception "+t+". This browser doesn't support SVG SVG DOM correctly.");return!1}return t.setAttribute("radius","1"),"1"!==t.cloneNode().getAttribute("radius")?(e.debugMode&&console.log("SVGFEMorphologyElement's radius attribute was corrupted when cloned. This browser doesn't support SVG DOM correctly."),!1):(e.debugMode&&console.log("This browser may support SVG filter effects."),!0)}var o=function(){function e(){}return e.makeFontMapFromStyleElement=function(e){for(var r=new t.Map,i=e.sheet,o=0;o<i.cssRules.length;o++){var a=i.cssRules[o];if(n(a)){var s=a.style.getPropertyValue("font-family").match(/^["']?(.*?)["']?$/)[1],l=a.style.getPropertyValue("src");l||(l=a.cssText.split("\n").map(function(e){return e.match(/src:\s*([^;]+?)\s*;/)}).filter(function(e){return null!==e}).map(function(e){return e[1]})[0]),r.set(s,l)}}return r},e.from=function(t){void 0!==t&&null!==t||(t={});var r=t,n=r.fontMap,o=void 0===n?null:n,a=r.preRenderTime,s=void 0===a?5:a,l=r.preciseOutlines,u=void 0!==l&&l,p=r.enableSvg,c=void 0===p?i():p,f=r.fallbackFonts,h=void 0===f?'Arial, Helvetica, sans-serif, "Segoe UI Symbol"':f,d=r.useAttachedFonts,_=void 0!==d&&d,g=new e;return g.fontMap=o,g.preRenderTime=s,g.preciseOutlines=u,g.enableSvg=c,g.fallbackFonts=h,g.useAttachedFonts=_,g},e}();r.RendererSettings=o}),t("renderers/clocks/video",["renderers/clocks/auto"],function(e,t){var r=function(){function t(t){var r=this;this.Oe=new e.AutoClock(function(){return t.currentTime},100),t.addEventListener("playing",function(){return r.Oe.play()},!1),t.addEventListener("pause",function(){return r.Oe.pause()},!1),t.addEventListener("seeking",function(){return r.Oe.seeking()},!1),t.addEventListener("ratechange",function(){return r.Oe.setRate(t.playbackRate)},!1)}return Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.Oe.currentTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.Oe.enabled},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.Oe.paused},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rate",{get:function(){return this.Oe.rate},enumerable:!0,configurable:!0}),t.prototype.enable=function(){return this.Oe.enable()},t.prototype.disable=function(){return this.Oe.disable()},t.prototype.toggle=function(){this.Oe.enabled?this.disable():this.enable()},t.prototype.setEnabled=function(e){return e?this.enable():this.disable()},t.prototype.addEventListener=function(e,t){this.Oe.addEventListener(e,t)},t}();t.VideoClock=r}),t("renderers/clocks/auto",["settings","renderers/clocks/manual"],function(e,t,r){var n=function(){function r(e,r){this.Ce=e,this.Pe=r,this.xe=new t.ManualClock,this.Ee=null,this.je=null,this.Ae=0}return r.prototype.play=function(){this.xe.enabled&&(this.Me(),this.xe.play())},r.prototype.pause=function(){if(this.xe.enabled){if(null===this.Ee)return void(e.debugMode&&console.warn("AutoClock.pause: Abnormal state detected. AutoClock._nextAnimationFrameRequestId should not have been null."));this.Fe(),this.xe.pause()}},r.prototype.seeking=function(){this.xe.seek(this.Ce())},Object.defineProperty(r.prototype,"currentTime",{get:function(){return this.xe.currentTime},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"enabled",{get:function(){return this.xe.enabled},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"paused",{get:function(){return this.xe.paused},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rate",{get:function(){return this.xe.rate},enumerable:!0,configurable:!0}),r.prototype.setRate=function(e){this.xe.setRate(e)},r.prototype.enable=function(){return!!this.xe.enable()&&(this.Me(),!0)},r.prototype.disable=function(){return!!this.xe.disable()&&(this.Fe(),!0)},r.prototype.toggle=function(){this.xe.enabled?this.disable():this.enable()},r.prototype.setEnabled=function(e){return e?this.enable():this.disable()},r.prototype.addEventListener=function(e,t){this.xe.addEventListener(e,t)},r.prototype.Te=function(t){var r=this;if(!this.xe.enabled)return void(e.debugMode&&console.warn("AutoClock._onTimerTick: Called when disabled."));var n=this.xe.currentTime,i=this.Ce();this.xe.paused?n!==i&&(this.je=i,this.Ae=t,this.xe.tick(i)):null!==this.je&&i===this.je?t-this.Ae>this.Pe?(this.Ae=0,this.xe.seek(i)):this.xe.tick((t-this.Ae)/1e3*this.xe.rate+this.je):(this.je=i,this.Ae=t,this.xe.tick(i)),this.Ee=requestAnimationFrame(function(e){return r.Te(e)})},r.prototype.Me=function(){var e=this;null===this.Ee&&(this.Ee=requestAnimationFrame(function(t){return e.Te(t)}))},r.prototype.Fe=function(){null!==this.Ee&&(cancelAnimationFrame(this.Ee),this.Ee=null)},r}();r.AutoClock=n}),t("renderers/clocks/manual",["utility/map","utility/mixin","renderers/clocks/base"],function(e,t,r,n){var i=function(){function t(){this.De=-1,this.ye=1,this.Re=!0,this.Ne=!0,this.l=new e.Map}return t.prototype.play=function(){this.Re&&this.Ne&&(this.Ne=!1,this.O(r.ClockEvent.Play,[]))},t.prototype.tick=function(e){this.Re&&this.De!==e&&(this.play(),this.De=e,this.O(r.ClockEvent.Tick,[]))},t.prototype.seek=function(e){this.Re&&(this.pause(),this.De!==e&&(this.stop(),this.tick(e),this.pause()))},t.prototype.pause=function(){this.Re&&(this.Ne||(this.Ne=!0,this.O(r.ClockEvent.Pause,[])))},t.prototype.stop=function(){this.O(r.ClockEvent.Stop,[])},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.De},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.Re},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.Ne},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rate",{get:function(){return this.ye},enumerable:!0,configurable:!0}),t.prototype.setRate=function(e){this.ye!==e&&(this.ye=e,this.O(r.ClockEvent.RateChange,[]))},t.prototype.enable=function(){return!this.Re&&(this.Re=!0,!0)},t.prototype.disable=function(){return!!this.Re&&(this.pause(),this.stop(),this.Re=!1,!0)},t.prototype.toggle=function(){this.Re?this.disable():this.enable()},t.prototype.setEnabled=function(e){return e?this.enable():this.disable()},t}();n.ManualClock=i,t.mixin(i,[r.EventSource])}),t("utility/mixin",[],function(e){function t(e,t){for(var r=0,n=t;r<n.length;r++)for(var i=n[r],o=0,a=Object.getOwnPropertyNames(i.prototype);o<a.length;o++){var s=a[o];e.prototype[s]=i.prototype[s]}}e.mixin=t}),t("renderers/clocks/base",[],function(e){var t=function(){function e(){}return e.prototype.addEventListener=function(e,t){var r=this.l.get(e);void 0===r&&this.l.set(e,r=[]),r.push(t)},e.prototype.O=function(e,t){var r=this.l.get(e);if(void 0!==r)for(var n=0,i=r;n<i.length;n++){var o=i[n];o.apply(this,t)}},e}();e.EventSource=t,function(e){e[e.Play=0]="Play",e[e.Tick=1]="Tick",e[e.Pause=2]="Pause",e[e.Stop=3]="Stop",e[e.RateChange=4]="RateChange"}(e.ClockEvent||(e.ClockEvent={}))}),t("parser/index",["parser/parse","parser/streams","parser/stream-parsers"],function(e,t,r,n){n.parse=e.parse,n.BrowserReadableStream=t.BrowserReadableStream,n.StringStream=t.StringStream,n.XhrStream=t.XhrStream,n.StreamParser=r.StreamParser,n.SrtStreamParser=r.SrtStreamParser}),t("parser/stream-parsers",["settings","types/ass","types/attachment","types/dialogue","types/style","utility/map","utility/promise","parser/misc"],function(e,t,r,n,i,o,a,s,l){function u(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r)-33;if(n<0||n>63)throw new Error("Out-of-range character code "+n+" at index "+r+" in string "+e);t+=n<26?String.fromCharCode("A".charCodeAt(0)+n):n<52?String.fromCharCode("a".charCodeAt(0)+n-26):n<62?String.fromCharCode("0".charCodeAt(0)+n-52):62===n?"+":"/"}return t}var p;!function(e){e[e.ScriptInfo=0]="ScriptInfo",e[e.Styles=1]="Styles",e[e.Events=2]="Events",e[e.Fonts=3]="Fonts",e[e.Graphics=4]="Graphics",e[e.Other=5]="Other",e[e.EOF=6]="EOF"}(p||(p={}));var c=function(){function n(e){var r=this;this.We=e,this.be=new t.ASS,this.Xe=new a.DeferredPromise,this.Ve=new a.DeferredPromise,this.Le=!0,this.Ie=p.ScriptInfo,this.Ye=null,this.We.nextLine().then(function(e){return r.ze(e)},function(e){r.Xe.reject(e),r.Ve.reject(e)})}return Object.defineProperty(n.prototype,"minimalASS",{get:function(){return this.Xe.promise},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ass",{get:function(){return this.Ve.promise},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentSection",{get:function(){return this.Ie},set:function(e){if(null!==this.Ye&&(this.be.addAttachment(this.Ye),this.Ye=null),this.Ie===p.ScriptInfo&&e!==p.ScriptInfo&&this.Xe.resolve(this.be),e===p.EOF){var t=this.be.properties;void 0===t.resolutionX||void 0===t.resolutionY?(this.Xe.reject("Malformed ASS script."),this.Ve.reject("Malformed ASS script.")):(this.Xe.resolve(this.be),this.Ve.resolve(this.be))}this.Ie=e},enumerable:!0,configurable:!0}),n.prototype.ze=function(t){var n=this;if(null===t)return void(this.currentSection=p.EOF);if("\r"===t[t.length-1]&&(t=t.substr(0,t.length-1)),65279===t.charCodeAt(0)&&this.Le&&(t=t.substr(1)),this.Le=!1,""===t);else if(";"===t[0]&&null===this.Ye);else if("[Script Info]"===t)this.currentSection=p.ScriptInfo;else if("[V4+ Styles]"===t||"[V4 Styles]"===t)this.currentSection=p.Styles;else if("[Events]"===t)this.currentSection=p.Events;else if("[Fonts]"===t)this.currentSection=p.Fonts;else if("[Graphics]"===t)this.currentSection=p.Graphics;else switch(null===this.Ye&&"["===t[0]&&"]"===t[t.length-1]&&(this.currentSection=p.Other),this.currentSection){case p.ScriptInfo:var i=s.parseLineIntoProperty(t);if(null!==i)switch(i.name){case"PlayResX":this.be.properties.resolutionX=parseInt(i.value);break;case"PlayResY":this.be.properties.resolutionY=parseInt(i.value);break;case"WrapStyle":this.be.properties.wrappingStyle=parseInt(i.value);break;case"ScaledBorderAndShadow":this.be.properties.scaleBorderAndShadow="yes"===i.value}break;case p.Styles:if(null===this.be.stylesFormatSpecifier){var o=s.parseLineIntoProperty(t);null!==o&&"Format"===o.name&&(this.be.stylesFormatSpecifier=o.value.split(",").map(function(e){return e.trim()}))}else try{this.be.addStyle(t)}catch(r){e.debugMode&&console.error("Could not parse style from line "+t+" - "+(r.stack||r))}break;case p.Events:if(null===this.be.dialoguesFormatSpecifier){var a=s.parseLineIntoProperty(t);null!==a&&"Format"===a.name&&(this.be.dialoguesFormatSpecifier=a.value.split(",").map(function(e){return e.trim()}))}else try{this.be.addEvent(t)}catch(r){e.debugMode&&console.error("Could not parse event from line "+t+" - "+(r.stack||r))}break;case p.Fonts:case p.Graphics:var l=this.currentSection===p.Fonts?/^fontname:(.+)/:/^filename:(.+)/,c=l.exec(t);if(null!==c)null!==this.Ye&&(this.be.addAttachment(this.Ye),this.Ye=null),this.Ye=new r.Attachment(c[1].trim(),this.currentSection===p.Fonts?r.AttachmentType.Font:r.AttachmentType.Graphic);else if(null!==this.Ye)try{this.Ye.contents+=u(t)}catch(t){e.debugMode&&console.error("Encountered error while reading font "+this.Ye.filename+": %o",t),this.Ye=null}break;case p.Other:break;default:throw new Error("Unhandled state "+this.currentSection)}this.We.nextLine().then(function(e){return n.ze(e)},function(e){n.Xe.reject(e),n.Ve.reject(e)})},n}();l.StreamParser=c;var f=function(){function e(e){var r=this;this.We=e,this.be=new t.ASS,this.Ve=new a.DeferredPromise,this.Le=!0,this.Be=null,this.Ge=null,this.qe=null,this.Ue=null,this.We.nextLine().then(function(e){return r.ze(e)},function(e){r.Ve.reject(e)}),this.be.properties.resolutionX=1280,this.be.properties.resolutionY=720,this.be.properties.wrappingStyle=1,this.be.properties.scaleBorderAndShadow=!0;var n=new i.Style(new o.Map([["Name","Default"],["FontSize","36"]]));this.be.styles.set(n.name,n)}return Object.defineProperty(e.prototype,"ass",{get:function(){return this.Ve.promise},enumerable:!0,configurable:!0}),e.prototype.ze=function(e){var t=this;if(null===e)return null!==this.Be&&null!==this.Ge&&null!==this.qe&&null!==this.Ue&&this.be.dialogues.push(new n.Dialogue(new o.Map([["Style","Default"],["Start",this.Ge],["End",this.qe],["Text",this.Ue]]),this.be)),void this.Ve.resolve(this.be);if("\r"===e[e.length-1]&&(e=e.substr(0,e.length-1)),65279===e.charCodeAt(0)&&this.Le&&(e=e.substr(1)),this.Le=!1,""===e)null!==this.Be&&null!==this.Ge&&null!==this.qe&&null!==this.Ue&&this.be.dialogues.push(new n.Dialogue(new o.Map([["Style","Default"],["Start",this.Ge],["End",this.qe],["Text",this.Ue]]),this.be)),this.Be=this.Ge=this.qe=this.Ue=null;else if(null===this.Be)/^\d+$/.test(e)&&(this.Be=e);else if(null===this.Ge&&null===this.qe){var r=/^(\d\d:\d\d:\d\d,\d\d\d) --> (\d\d:\d\d:\d\d,\d\d\d)/.exec(e);null!==r&&(this.Ge=r[1].replace(",","."),this.qe=r[2].replace(",","."))}else e=e.replace(/<b>/g,"{\\b1}").replace(/\{b\}/g,"{\\b1}").replace(/<\/b>/g,"{\\b0}").replace(/\{\/b\}/g,"{\\b0}").replace(/<i>/g,"{\\i1}").replace(/\{i\}/g,"{\\i1}").replace(/<\/i>/g,"{\\i0}").replace(/\{\/i\}/g,"{\\i0}").replace(/<u>/g,"{\\u1}").replace(/\{u\}/g,"{\\u1}").replace(/<\/u>/g,"{\\u0}").replace(/\{\/u\}/g,"{\\u0}").replace(/<font color="#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})">/g,function(e,t,r,n){return"{c&H"+n+r+t+"&}"}).replace(/<\/font>/g,"{\\c}"),null!==this.Ue?this.Ue+="\\N"+e:this.Ue=e;this.We.nextLine().then(function(e){return t.ze(e)},function(e){t.Ve.reject(e)})},e}();l.SrtStreamParser=f}),t("types/ass",["parser/index","parser/misc","serialization","settings","utility/map","utility/promise","types/dialogue","types/misc","types/script-properties","types/style"],function(t,r,n,i,a,s,l,u,p,c,f){var h=function(){function f(){if(this.ve=new p.ScriptProperties,this.He=new a.Map,this.Ke=[],this.Ze=[],this.Je=null,this.$e=null,1===arguments.length)throw new Error("Constructor `new ASS(rawASS)` has been deprecated. Use `ASS.fromString(rawASS)` instead.");this.He.set("Default",new c.Style(new a.Map([["Name","Default"]])))}return f.fromString=function(e,r){return void 0===r&&(r=u.Format.ASS),f.fromStream(new t.StringStream(e),r)},f.fromStream=function(e,r){switch(void 0===r&&(r=u.Format.ASS),r){case u.Format.ASS:case"ass":return new t.StreamParser(e).ass;case u.Format.SRT:case"srt":return new t.SrtStreamParser(e).ass;default:throw new Error("Invalid value of type: "+r)}},f.fromUrl=function(r,n){void 0===n&&(n=u.Format.ASS);var o;return o="function"==typeof e.fetch&&"function"==typeof e.ReadableStream&&"function"==typeof e.ReadableStream.prototype.getReader&&"function"==typeof e.TextDecoder?e.fetch(r).then(function(e){if(!1===e.ok||void 0===e.ok&&(void 0===e.status||e.status<200||e.status>299))throw new Error("HTTP request for "+r+" failed with status code "+e.status);return f.fromReadableStream(e.body,"utf-8",n)}):s.Promise.reject(new Error("Not supported.")),o.catch(function(e){i.debugMode&&console.log("fetch() failed, falling back to XHR: %o",e);var o=new XMLHttpRequest,a=f.fromStream(new t.XhrStream(o),n);return o.open("GET",r,!0),o.send(),a})},f.fromReadableStream=function(e,r,n){return void 0===r&&(r="utf-8"),void 0===n&&(n=u.Format.ASS),f.fromStream(new t.BrowserReadableStream(e,r),n)},f.fromJSON=function(e){var t=Object.create(f.prototype);t.ve=e.ve,t.He=new a.Map;for(var r=0,n=Object.keys(e.He);r<n.length;r++){var i=n[r],o=e.He[i];t.He.set(i,o)}return t.Ke=e.Ke,t.Ze=e.Ze,t.Je=e.Je,t.$e=e.$e,t},Object.defineProperty(f.prototype,"properties",{get:function(){return this.ve},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"styles",{get:function(){return this.He},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"dialogues",{get:function(){return this.Ke},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"attachments",{get:function(){return this.Ze},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"stylesFormatSpecifier",{get:function(){return this.Je},set:function(e){this.Je=e},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"dialoguesFormatSpecifier",{get:function(){return this.$e},set:function(e){this.$e=e},enumerable:!0,configurable:!0}),f.prototype.addStyle=function(e){if(null===this.Je)throw new Error("stylesFormatSpecifier is not set.");var t=r.parseLineIntoTypedTemplate(e,this.Je);if(null!==t&&"Style"===t.type){var n=t.template;if(i.verboseMode){var o="";n.forEach(function(e,t){return o+=t+" = "+e+", "}),console.log("Read style: "+o)}var a=new c.Style(n);this.He.set(a.name,a)}},f.prototype.addEvent=function(e){if(null===this.$e)throw new Error("dialoguesFormatSpecifier is not set.");var t=r.parseLineIntoTypedTemplate(e,this.$e);if(null!==t&&"Dialogue"===t.type){var n=t.template;if(i.verboseMode){var o="";n.forEach(function(e,t){return o+=t+" = "+e+", "}),console.log("Read dialogue: "+o)}this.dialogues.push(new l.Dialogue(n,this))}},f.prototype.addAttachment=function(e){this.Ze.push(e)},f.prototype.toJSON=function(){var e=Object.create(null);return e.ve=this.ve,e.He=Object.create(null),this.He.forEach(function(t,r){return e.He[r]=t}),e.Ke=this.Ke,e.Ze=this.Ze,e.Je=this.Je,e.$e=this.$e,e.Qe=f.prototype.Qe,e},f=o([n.registerClass],f)}();f.ASS=h}),t("types/script-properties",["serialization"],function(e,t){var r=function(){function t(){}return Object.defineProperty(t.prototype,"resolutionX",{get:function(){return this.et},set:function(e){this.et=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resolutionY",{get:function(){return this.tt},set:function(e){this.tt=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrappingStyle",{get:function(){return this.rt},set:function(e){this.rt=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleBorderAndShadow",{get:function(){return this.nt},set:function(e){this.nt=e},enumerable:!0,configurable:!0}),t=o([e.registerClass],t)}();t.ScriptProperties=r}),t("types/dialogue",["types/misc","parser/parse","parts/index","serialization","settings","utility/map"],function(e,t,r,n,i,a,s){function l(e){return e.split(":").reduce(function(e,t){return 60*e+parseFloat(t)},0)}var u=function(){function s(t,r){this.it=null,this.ot=!1;var n=new a.Map;t.forEach(function(e,t){n.set(t.toLowerCase(),e)}),t=n,this.A=++s.at;var o=t.get("style");"string"==typeof o&&(o=o.replace(/^\*+/,""),null!==o.match(/^Default$/i)&&(o="Default"));var u=void 0!==o?r.styles.get(o):void 0;if(void 0===u&&(i.debugMode&&console.warn("Unrecognized style "+o+'. Falling back to "Default"'),void 0===(u=r.styles.get("Default"))))throw new Error("Unrecognized style "+o+'. Could not fall back to "Default" style since it doesn\'t exist.');this.fe=u;var p=t.get("start");if("string"!=typeof p)throw new Error("Dialogue start time "+p+" is not a string.");this.st=l(p);var c=t.get("end");if("string"!=typeof c)throw new Error("Dialogue end time "+c+" is not a string.");this.lt=l(c),this.ut=Math.max(e.valueOrDefault(t,"layer",parseInt,function(e){return!isNaN(e)},"0"),0);var f=t.get("text");if("string"!=typeof f)throw new Error("Dialogue text "+f+" is not a string.");this.pt=f}return Object.defineProperty(s.prototype,"id",{get:function(){return this.A},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"start",{get:function(){return this.st},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"end",{get:function(){return this.lt},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"style",{get:function(){return this.fe},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"alignment",{get:function(){return null===this.it&&this.ct(),this.ft},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"layer",{get:function(){return this.ut},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"parts",{get:function(){return null===this.it&&this.ct(),this.it},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"containsTransformTag",{get:function(){return null===this.it&&this.ct(),this.ot},enumerable:!0,configurable:!0}),s.prototype.toString=function(){return"#"+this.A+" ["+this.st.toFixed(3)+"-"+this.lt.toFixed(3)+"] "+(null!==this.it?this.it.join(", "):this.pt)},s.prototype.ct=function(){var e=this;if(this.it=t.parse(this.pt,"dialogueParts"),this.ft=this.fe.alignment,this.it.forEach(function(t,n){t instanceof r.Alignment?e.ft=t.value:t instanceof r.Move?null!==t.t1&&null!==t.t2||(e.it[n]=new r.Move(t.x1,t.y1,t.x2,t.y2,0,e.lt-e.st)):t instanceof r.Transform&&(null!==t.start&&null!==t.end&&null!==t.accel||(e.it[n]=new r.Transform(null===t.start?0:t.start,null===t.end?e.lt-e.st:t.end,null===t.accel?1:t.accel,t.tags)),e.ot=!0)}),i.debugMode){var n=this.it.filter(function(e){return e instanceof r.Comment&&-1!==e.value.indexOf("\\")});n.length>0&&console.warn("Possible incorrect parse:\n"+this.pt+"\nwas parsed as\n"+this.toString()+"\nThe possibly incorrect parses are:\n"+n.join("\n"))}},s.at=-1,s=o([n.registerClass],s)}();s.Dialogue=u}),t("types/style",["parser/parse","serialization","utility/map","types/misc"],function(e,t,r,n,i){var a=function(){function i(t){var i=new r.Map;t.forEach(function(e,t){i.set(t.toLowerCase(),e)}),t=i;var o=t.get("name");if("string"!=typeof o)throw new Error("Style name "+o+" is not a string.");this.ht=o.replace(/^\*+/,""),this.F=!!n.valueOrDefault(t,"italic",parseFloat,function(e){return!isNaN(e)},"0"),this.T=!!n.valueOrDefault(t,"bold",parseFloat,function(e){return!isNaN(e)},"0"),this.W=!!n.valueOrDefault(t,"underline",parseFloat,function(e){return!isNaN(e)},"0"),this.X=!!n.valueOrDefault(t,"strikeout",parseFloat,function(e){return!isNaN(e)},"0"),this.N=n.valueOrDefault(t,"fontname",function(e){return e},function(e){return e.constructor===String},"sans-serif"),this.R=n.valueOrDefault(t,"fontsize",parseFloat,function(e){return!isNaN(e)},"18"),this.D=n.valueOrDefault(t,"scalex",parseFloat,function(e){return e>=0},"100")/100,this.V=n.valueOrDefault(t,"scaley",parseFloat,function(e){return e>=0},"100")/100,this.Y=n.valueOrDefault(t,"spacing",parseFloat,function(e){return e>=0},"0"),this.oe=n.valueOrDefault(t,"angle",parseFloat,function(e){return!isNaN(e)},"0"),this.U=n.valueOrDefault(t,"primarycolour",function(t){return e.parse(t,"colorWithAlpha")},null,"&H00FFFFFF"),this.ae=n.valueOrDefault(t,"secondarycolour",function(t){return e.parse(t,"colorWithAlpha")},null,"&H00FFFF00"),this.K=n.valueOrDefault(t,"outlinecolour",function(t){return e.parse(t,"colorWithAlpha")},null,"&H00000000"),this.J=n.valueOrDefault(t,"backcolour",function(t){return e.parse(t,"colorWithAlpha")},null,"&H80000000"),this.dt=n.valueOrDefault(t,"outline",parseFloat,function(e){return e>=0},"2"),this._t=n.valueOrDefault(t,"borderstyle",parseInt,function(e){return n.BorderStyle[n.BorderStyle[e]]===e},"1"),this.gt=n.valueOrDefault(t,"shadow",parseFloat,function(e){return e>=0},"3"),this.ft=n.valueOrDefault(t,"alignment",parseInt,function(e){return e>=1&&e<=9},"2"),this.yt=n.valueOrDefault(t,"marginl",parseFloat,function(e){return!isNaN(e)},"20"),this.mt=n.valueOrDefault(t,"marginr",parseFloat,function(e){return!isNaN(e)},"20"),this.vt=n.valueOrDefault(t,"marginv",parseFloat,function(e){return!isNaN(e)},"20")}return Object.defineProperty(i.prototype,"name",{get:function(){return this.ht},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"italic",{get:function(){return this.F},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bold",{get:function(){return this.T},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"underline",{get:function(){return this.W},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"strikeThrough",{get:function(){return this.X},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontName",{get:function(){return this.N},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this.R},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontScaleX",{get:function(){return this.D},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontScaleY",{get:function(){return this.V},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this.Y},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotationZ",{get:function(){return this.oe},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"primaryColor",{get:function(){return this.U},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"secondaryColor",{get:function(){return this.ae},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"outlineColor",{get:function(){return this.K},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadowColor",{get:function(){return this.J},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"outlineThickness",{get:function(){return this.dt},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"borderStyle",{get:function(){return this._t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadowDepth",{get:function(){return this.gt},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"alignment",{get:function(){return this.ft},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"marginLeft",{get:function(){return this.yt},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"marginRight",{get:function(){return this.mt},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"marginVertical",{get:function(){return this.vt},enumerable:!0,configurable:!0}),i=o([t.registerClass],i)}();i.Style=a}),t("types/attachment",["serialization"],function(e,t){!function(e){e[e.Font=0]="Font",e[e.Graphic=1]="Graphic"}(t.AttachmentType||(t.AttachmentType={}));var r=function(){function t(e,t){this.bt=e,this.wt=t,this.St=""}return Object.defineProperty(t.prototype,"filename",{get:function(){return this.bt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.wt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contents",{get:function(){return this.St},set:function(e){this.St=e},enumerable:!0,configurable:!0}),t=o([e.registerClass],t)}();t.Attachment=r}),t("parser/misc",["utility/map"],function(e,t){function r(e){var t=e.indexOf(":");return-1===t?null:{name:e.substr(0,t),value:e.substr(t+1).replace(/^\s+/,"")}}function n(t,n){var i=r(t);if(null===i)return null;var o=i.value.split(",");o.length>n.length&&(o[n.length-1]=o.slice(n.length-1).join(","));var a=new e.Map;return n.forEach(function(e,t){a.set(e,o[t])}),{type:i.name,template:a}}t.parseLineIntoProperty=r,t.parseLineIntoTypedTemplate=n}),t("parser/streams",["utility/promise"],function(t,r){var n=function(){function e(e){this.kt=e,this.Ot=0}return e.prototype.nextLine=function(){var e;if(this.Ot<this.kt.length){var r=this.kt.indexOf("\n",this.Ot);-1!==r?(e=t.Promise.resolve(this.kt.substring(this.Ot,r)),this.Ot=r+1):(e=t.Promise.resolve(this.kt.substr(this.Ot)),this.Ot=this.kt.length)}else e=t.Promise.resolve(null);return e},e}();r.StringStream=n;var i=function(){function e(e){var t=this;this.Ct=e,this.Ot=0,this.Pt=null,this.xt=null,e.addEventListener("progress",function(){return t.Et()},!1),e.addEventListener("load",function(){return t.jt()},!1),e.addEventListener("error",function(e){return t.At(e)},!1)}return e.prototype.nextLine=function(){if(null!==this.Pt)throw new Error("XhrStream only supports one pending unfulfilled read at a time.");var e=this.Pt=new t.DeferredPromise;return this.Mt(),e.promise},e.prototype.Et=function(){null!==this.Pt&&this.Ct.readyState!==XMLHttpRequest.DONE&&this.Mt()},e.prototype.jt=function(){null!==this.Pt&&this.Mt()},e.prototype.At=function(e){this.xt=e,null!==this.Pt&&this.Mt()},e.prototype.Mt=function(){if(null!==this.xt)return void this.Pt.reject(this.xt);var e=this.Ct.responseText,t=e.indexOf("\n",this.Ot);-1!==t?(this.Pt.resolve(e.substring(this.Ot,t)),this.Ot=t+1,this.Pt=null):this.Ct.readyState===XMLHttpRequest.DONE&&(null!==this.xt?this.Pt.reject(this.xt):this.Ot<e.length?(this.Pt.resolve(e.substr(this.Ot)),this.Ot=e.length):this.Pt.resolve(null),this.Pt=null)},e}();r.XhrStream=i;var o=function(){function r(t,r){this.Ft="",this.Pt=null,this.Tt=t.getReader(),this.Dt=new e.TextDecoder(r,{ignoreBOM:!0})}return r.prototype.nextLine=function(){if(null!==this.Pt)throw new Error("BrowserReadableStream only supports one pending unfulfilled read at a time.");var e=this.Pt=new t.DeferredPromise;return this.Mt(),e.promise},r.prototype.Mt=function(){var e=this,t=this.Ft.indexOf("\n");-1!==t?(this.Pt.resolve(this.Ft.substr(0,t)),this.Ft=this.Ft.substr(t+1),this.Pt=null):this.Tt.read().then(function(t){var r=t.value;t.done?(0===e.Ft.length?e.Pt.resolve(null):(e.Pt.resolve(e.Ft),e.Ft=""),e.Pt=null):(e.Ft+=e.Dt.decode(r,{stream:!0}),e.Mt())})},r}();r.BrowserReadableStream=o}),t("parser/parse",["parts/index","settings","utility/map","utility/promise","webworker/commands","webworker/misc"],function(e,t,r,n,i,o,a){function s(e,r){var n=new p(e,r).result;if(null===n||n.end!==e.length)throw t.debugMode&&console.error("Parse failed. %s %s %o",r,e,n),new Error("Parse failed.");return n.value}function l(e,t,r,n){p.prototype["parse_tag_"+e]=function(i){var o=new d(i);if(null===this.read(o,e))return i.pop(),null;var a=r.call(this,o);if(null!==a)o.value=new t(a.value);else{if(n)return i.pop(),null;o.value=new t(null)}return o}}var u=new r.Map;a.parse=s;var p=function(){function t(e,t){this.Rt=e;var r=u.get(t);if(void 0===r)throw new Error("Could not find parser rule named "+t);this.Nt=new d(null),this.Wt=r.call(this,this.Nt)}return Object.defineProperty(t.prototype,"result",{get:function(){return this.Wt},enumerable:!0,configurable:!0}),t.prototype.parse_dialogueParts=function(t){var r,n=new d(t);for(n.value=[];this.Xt();){var i=this.parse_enclosedTags(n);if(null!==i)(r=n.value).push.apply(r,i.value);else{var o=this.parse_newline(n)||this.parse_hardspace(n)||this.parse_text(n);if(o.value instanceof e.Text&&n.value[n.value.length-1]instanceof e.Text){var a=n.value[n.value.length-1];n.value[n.value.length-1]=new e.Text(a.value+o.value.value)}else n.value.push(o.value)}}var l=!1;return n.value.forEach(function(t,r){t instanceof e.DrawingMode?l=0!==t.scale:t instanceof e.Text&&l&&(n.value[r]=new e.DrawingInstructions(s(t.value,"drawingInstructions")))}),n},t.prototype.parse_enclosedTags=function(t){var r=new d(t);if(r.value=[],null===this.read(r,"{"))return t.pop(),null;for(var n=this.Vt();this.Xt()&&"}"!==n;n=this.Vt()){var i=null;if(null!==this.read(r,"\\")&&null===(i=this.parse_tag_alpha(r)||this.parse_tag_iclip(r)||this.parse_tag_xbord(r)||this.parse_tag_ybord(r)||this.parse_tag_xshad(r)||this.parse_tag_yshad(r)||this.parse_tag_blur(r)||this.parse_tag_bord(r)||this.parse_tag_clip(r)||this.parse_tag_fade(r)||this.parse_tag_fscx(r)||this.parse_tag_fscy(r)||this.parse_tag_move(r)||this.parse_tag_shad(r)||this.parse_tag_fad(r)||this.parse_tag_fax(r)||this.parse_tag_fay(r)||this.parse_tag_frx(r)||this.parse_tag_fry(r)||this.parse_tag_frz(r)||this.parse_tag_fsp(r)||this.parse_tag_fsplus(r)||this.parse_tag_fsminus(r)||this.parse_tag_org(r)||this.parse_tag_pbo(r)||this.parse_tag_pos(r)||this.parse_tag_an(r)||this.parse_tag_be(r)||this.parse_tag_fn(r)||this.parse_tag_fr(r)||this.parse_tag_fs(r)||this.parse_tag_kf(r)||this.parse_tag_ko(r)||this.parse_tag_1a(r)||this.parse_tag_1c(r)||this.parse_tag_2a(r)||this.parse_tag_2c(r)||this.parse_tag_3a(r)||this.parse_tag_3c(r)||this.parse_tag_4a(r)||this.parse_tag_4c(r)||this.parse_tag_a(r)||this.parse_tag_b(r)||this.parse_tag_c(r)||this.parse_tag_i(r)||this.parse_tag_k(r)||this.parse_tag_K(r)||this.parse_tag_p(r)||this.parse_tag_q(r)||this.parse_tag_r(r)||this.parse_tag_s(r)||this.parse_tag_t(r)||this.parse_tag_u(r))&&r.pop(),null===i&&(i=this.parse_comment(r)),null===i)return t.pop(),null;i.value instanceof e.Comment&&r.value[r.value.length-1]instanceof e.Comment?r.value[r.value.length-1]=new e.Comment(r.value[r.value.length-1].value+i.value.value):r.value.push(i.value)}return null===this.read(r,"}")?(t.pop(),null):r},t.prototype.parse_newline=function(t){var r=new d(t);return null===this.read(r,"\\N")&&null===this.read(r,"\\n")?(t.pop(),null):(r.value=new e.NewLine,r)},t.prototype.parse_hardspace=function(t){var r=new d(t);return null===this.read(r,"\\h")?(t.pop(),null):(r.value=new e.Text("\xa0"),r)},t.prototype.parse_text=function(t){var r=this.Vt(),n=new d(t),i=new d(n,r);return n.value=new e.Text(i.value),n},t.prototype.parse_comment=function(t){var r=this.Vt(),n=new d(t),i=new d(n,r);return n.value=new e.Comment(i.value),n},t.prototype.parse_tag_a=function(t){var r=new d(t);if(null===this.read(r,"a"))return t.pop(),null;var n=this.Vt();switch(n){case"1":var i=this.Vt(2);switch(i){case"10":case"11":n=i}break;case"2":case"3":case"5":case"6":case"7":case"9":break;default:return t.pop(),null}var o=new d(r,n),a=-1;switch(o.value){case"1":a=1;break;case"2":a=2;break;case"3":a=3;break;case"5":a=7;break;case"6":a=8;break;case"7":a=9;break;case"9":a=4;break;case"10":a=5;break;case"11":a=6}return r.value=new e.Alignment(a),r},t.prototype.parse_tag_alpha=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_an=function(t){var r=new d(t);if(null===this.read(r,"an"))return t.pop(),null;var n=this.Vt();if(n<"1"||n>"9")return t.pop(),null;var i=new d(r,n);return r.value=new e.Alignment(parseInt(i.value)),r},t.prototype.parse_tag_b=function(t){var r=new d(t);if(null===this.read(r,"b"))return t.pop(),null;var n=null,i=this.Vt();return i>="1"&&i<="9"&&(i=this.Vt(3),"00"===i.substr(1)&&(n=new d(r,i),n.value=parseInt(n.value))),null===n&&(n=this.parse_enableDisable(r)),r.value=null!==n?new e.Bold(n.value):new e.Bold(null),r},t.prototype.parse_tag_be=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_blur=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_bord=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_c=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_clip=function(e){return this.Lt("clip",e)},t.prototype.parse_tag_fad=function(t){var r=new d(t);if(null===this.read(r,"fad"))return t.pop(),null;if(null===this.read(r,"("))return t.pop(),null;var n=this.parse_decimal(r);if(null===n)return t.pop(),null;if(null===this.read(r,","))return t.pop(),null;var i=this.parse_decimal(r);return null===i?(t.pop(),null):null===this.read(r,")")?(t.pop(),null):(r.value=new e.Fade(n.value/1e3,i.value/1e3),r)},t.prototype.parse_tag_fade=function(t){var r=new d(t);if(null===this.read(r,"fade"))return t.pop(),null;if(null===this.read(r,"("))return t.pop(),null;var n=this.parse_decimal(r);if(null===n)return t.pop(),null;if(null===this.read(r,","))return t.pop(),null;var i=this.parse_decimal(r);if(null===i)return t.pop(),null;if(null===this.read(r,","))return t.pop(),null;var o=this.parse_decimal(r);if(null===o)return t.pop(),null;if(null===this.read(r,","))return t.pop(),null;var a=this.parse_decimal(r);if(null===a)return t.pop(),null;if(null===this.read(r,","))return t.pop(),null;var s=this.parse_decimal(r);if(null===s)return t.pop(),null;if(null===this.read(r,","))return t.pop(),null;var l=this.parse_decimal(r);if(null===l)return t.pop(),null;if(null===this.read(r,","))return t.pop(),null;var u=this.parse_decimal(r);return null===u?(t.pop(),null):null===this.read(r,")")?(t.pop(),null):(r.value=new e.ComplexFade(1-n.value/255,1-i.value/255,1-o.value/255,a.value/1e3,s.value/1e3,l.value/1e3,u.value/1e3),r)},t.prototype.parse_tag_fax=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_fay=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_fn=function(t){var r=new d(t);if(null===this.read(r,"fn"))return t.pop(),null;for(var n=new d(r,""),i=this.Vt();this.Xt()&&"\\"!==i&&"}"!==i;i=this.Vt())n.value+=i;return n.value.length>0?r.value=new e.FontName(n.value):r.value=new e.FontName(null),r},t.prototype.parse_tag_fr=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_frx=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_fry=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_frz=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_fs=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_fsplus=function(t){var r=new d(t);if(null===this.read(r,"fs+"))return t.pop(),null;var n=this.parse_decimal(r);return null===n?(t.pop(),null):(r.value=new e.FontSizePlus(n.value/10),r)},t.prototype.parse_tag_fsminus=function(t){var r=new d(t);if(null===this.read(r,"fs-"))return t.pop(),null;var n=this.parse_decimal(r);return null===n?(t.pop(),null):(r.value=new e.FontSizeMinus(n.value/10),r)},t.prototype.parse_tag_fscx=function(t){var r=new d(t);if(null===this.read(r,"fscx"))return t.pop(),null;var n=this.parse_decimal(r);return r.value=null!==n?new e.FontScaleX(n.value/100):new e.FontScaleX(null),r},t.prototype.parse_tag_fscy=function(t){var r=new d(t);if(null===this.read(r,"fscy"))return t.pop(),null;var n=this.parse_decimal(r);return r.value=null!==n?new e.FontScaleY(n.value/100):new e.FontScaleY(null),r},t.prototype.parse_tag_fsp=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_i=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_iclip=function(e){return this.Lt("iclip",e)},t.prototype.parse_tag_k=function(t){var r=new d(t);if(null===this.read(r,"k"))return t.pop(),null;var n=this.parse_decimal(r);return null===n?(t.pop(),null):(r.value=new e.ColorKaraoke(n.value/100),r)},t.prototype.parse_tag_K=function(t){var r=new d(t);if(null===this.read(r,"K"))return t.pop(),null;var n=this.parse_decimal(r);return null===n?(t.pop(),null):(r.value=new e.SweepingColorKaraoke(n.value/100),r)},t.prototype.parse_tag_kf=function(t){var r=new d(t);if(null===this.read(r,"kf"))return t.pop(),null;var n=this.parse_decimal(r);return null===n?(t.pop(),null):(r.value=new e.SweepingColorKaraoke(n.value/100),r)},t.prototype.parse_tag_ko=function(t){var r=new d(t);if(null===this.read(r,"ko"))return t.pop(),null;var n=this.parse_decimal(r);return null===n?(t.pop(),null):(r.value=new e.OutlineKaraoke(n.value/100),r)},t.prototype.parse_tag_move=function(t){var r=new d(t);if(null===this.read(r,"move"))return t.pop(),null;if(null===this.read(r,"("))return t.pop(),null;var n=this.parse_decimal(r);if(null===n)return t.pop(),null;if(null===this.read(r,","))return t.pop(),null;var i=this.parse_decimal(r);if(null===i)return t.pop(),null;if(null===this.read(r,","))return t.pop(),null;var o=this.parse_decimal(r);if(null===o)return t.pop(),null;if(null===this.read(r,","))return t.pop(),null;var a=this.parse_decimal(r);if(null===a)return t.pop(),null;var s=null,l=null;if(null!==this.read(r,",")){if(null===(s=this.parse_decimal(r)))return t.pop(),null;if(null===this.read(r,","))return t.pop(),null;if(null===(l=this.parse_decimal(r)))return t.pop(),null}return null===this.read(r,")")?(t.pop(),null):(r.value=new e.Move(n.value,i.value,o.value,a.value,null!==s?s.value/1e3:null,null!==l?l.value/1e3:null),r)},t.prototype.parse_tag_org=function(t){var r=new d(t);if(null===this.read(r,"org"))return t.pop(),null;if(null===this.read(r,"("))return t.pop(),null;var n=this.parse_decimal(r);if(null===n)return t.pop(),null;if(null===this.read(r,","))return t.pop(),null;var i=this.parse_decimal(r);return null===i?(t.pop(),null):null===this.read(r,")")?(t.pop(),null):(r.value=new e.RotationOrigin(n.value,i.value),r)},t.prototype.parse_tag_p=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_pbo=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_pos=function(t){var r=new d(t);if(null===this.read(r,"pos"))return t.pop(),null;if(null===this.read(r,"("))return t.pop(),null;var n=this.parse_decimal(r);if(null===n)return t.pop(),null;if(null===this.read(r,","))return t.pop(),null;var i=this.parse_decimal(r);return null===i?(t.pop(),null):null===this.read(r,")")?(t.pop(),null):(r.value=new e.Position(n.value,i.value),r)},t.prototype.parse_tag_q=function(t){var r=new d(t);if(null===this.read(r,"q"))return t.pop(),null;var n=this.Vt();if(n<"0"||n>"3")return t.pop(),null;var i=new d(r,n);return r.value=new e.WrappingStyle(parseInt(i.value)),r},t.prototype.parse_tag_r=function(t){var r=new d(t);if(null===this.read(r,"r"))return t.pop(),null;for(var n=new d(r,""),i=this.Vt();this.Xt()&&"\\"!==i&&"}"!==i;i=this.Vt())n.value+=i;return n.value.length>0?r.value=new e.Reset(n.value):r.value=new e.Reset(null),r},t.prototype.parse_tag_s=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_shad=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_t=function(t){var r=new d(t);if(null===this.read(r,"t"))return t.pop(),null;if(null===this.read(r,"("))return t.pop(),null;var n=null,i=null,o=null,a=this.parse_decimal(r);if(null!==a){if(null===this.read(r,","))return t.pop(),null;var s=this.parse_decimal(r);if(null!==s){if(n=a,i=s,null===this.read(r,","))return t.pop(),null;var l=this.parse_decimal(r);if(null!==l&&(o=l,null===this.read(r,",")))return t.pop(),null}else if(o=a,null===this.read(r,","))return t.pop(),null}for(var u=[],p=this.Vt();this.Xt()&&")"!==p&&"}"!==p;p=this.Vt()){var c=null;if(null!==this.read(r,"\\")&&null===(c=this.parse_tag_alpha(r)||this.parse_tag_iclip(r)||this.parse_tag_xbord(r)||this.parse_tag_ybord(r)||this.parse_tag_xshad(r)||this.parse_tag_yshad(r)||this.parse_tag_blur(r)||this.parse_tag_bord(r)||this.parse_tag_clip(r)||this.parse_tag_fscx(r)||this.parse_tag_fscy(r)||this.parse_tag_shad(r)||this.parse_tag_fax(r)||this.parse_tag_fay(r)||this.parse_tag_frx(r)||this.parse_tag_fry(r)||this.parse_tag_frz(r)||this.parse_tag_fsp(r)||this.parse_tag_fsplus(r)||this.parse_tag_fsminus(r)||this.parse_tag_be(r)||this.parse_tag_fr(r)||this.parse_tag_fs(r)||this.parse_tag_1a(r)||this.parse_tag_1c(r)||this.parse_tag_2a(r)||this.parse_tag_2c(r)||this.parse_tag_3a(r)||this.parse_tag_3c(r)||this.parse_tag_4a(r)||this.parse_tag_4c(r)||this.parse_tag_c(r))&&r.pop(),null===c&&(c=this.parse_comment(r)),null===c)return t.pop(),null;c.value instanceof e.Comment&&u[u.length-1]instanceof e.Comment?u[u.length-1]=new e.Comment(u[u.length-1].value+c.value.value):u.push(c.value)}return this.read(r,")"),r.value=new e.Transform(null!==n?n.value/1e3:null,null!==i?i.value/1e3:null,null!==o?o.value/1e3:null,u),r},t.prototype.parse_tag_u=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_xbord=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_xshad=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_ybord=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_yshad=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_1a=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_1c=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_2a=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_2c=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_3a=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_3c=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_4a=function(){throw new Error("Method not implemented.")},t.prototype.parse_tag_4c=function(){throw new Error("Method not implemented.")},t.prototype.parse_drawingInstructions=function(t){var r=new d(t),n=null,i=[];for(r.value=[];this.Xt();){for(;null!==this.read(r," "););if(!this.Xt())break;if(null!==n){var o=this.parse_decimal(r);if(null!==o){i.push(o),"m"===n&&2===i.length?(r.value.push(new e.drawing.MoveInstruction(i[0].value,i[1].value)),i.splice(0,i.length)):"l"===n&&2===i.length?(r.value.push(new e.drawing.LineInstruction(i[0].value,i[1].value)),i.splice(0,i.length)):"b"===n&&6===i.length&&(r.value.push(new e.drawing.CubicBezierCurveInstruction(i[0].value,i[1].value,i[2].value,i[3].value,i[4].value,i[5].value)),i.splice(0,i.length));continue}}var a=this.parse_text(r),s=a.value.value;switch(s){case"m":case"l":case"b":n=s,i.splice(0,i.length)}}for(;null!==this.read(r," "););return r},t.prototype.parse_decimalInt32=function(e){for(var t=new d(e),r=null!==this.read(t,"-"),n=new d(t,""),i=this.Vt();this.Xt()&&i>="0"&&i<="9";i=this.Vt())n.value+=i;if(0===n.value.length)return e.pop(),null;var o=parseInt(n.value);return o>=4294967295?o=4294967295:r&&(o=-o),t.value=o,t},t.prototype.parse_hexInt32=function(e){for(var t=new d(e),r=null!==this.read(t,"-"),n=new d(t,""),i=this.Vt();this.Xt()&&(i>="0"&&i<="9"||i>="a"&&i<="f"||i>="A"&&i<="F");i=this.Vt())n.value+=i;if(0===n.value.length)return e.pop(),null;var o=parseInt(n.value,16);return o>=4294967295?o=4294967295:r&&(o=-o),t.value=o,t},t.prototype.parse_decimalOrHexInt32=function(e){var t=new d(e),r=null!==this.read(t,"&H")||null!==this.read(t,"&h")?this.parse_hexInt32(t):this.parse_decimalInt32(t);return null===r?(e.pop(),null):(t.value=r.value,t)},t.prototype.parse_decimal=function(e){var t=new d(e),r=null!==this.read(t,"-"),n=this.parse_unsignedDecimal(t);return null===n?(e.pop(),null):(t.value=n.value,r&&(t.value=-t.value),t)},t.prototype.parse_unsignedDecimal=function(e){for(var t=new d(e),r=new d(t,""),n=null,i=this.Vt();this.Xt()&&i>="0"&&i<="9";i=this.Vt())r.value+=i;if(0===r.value.length)return e.pop(),null;if(null!==this.read(t,".")){n=new d(t,"");for(var i=this.Vt();this.Xt()&&i>="0"&&i<="9";i=this.Vt())n.value+=i;if(0===n.value.length)return e.pop(),null}return t.value=parseFloat(r.value+(null!==n?"."+n.value:"")),t},t.prototype.parse_enableDisable=function(e){var t=this.Vt();if("0"===t||"1"===t){var r=new d(e,t);return r.value="1"===r.value,r}return null},t.prototype.parse_color=function(t){for(var r=new d(t);null!==this.read(r,"&")||null!==this.read(r,"H"););var n=this.parse_hexInt32(r);if(null===n)return t.pop(),null;var i=n.value;for(r.value=new e.Color(255&i,i>>8&255,i>>16&255);null!==this.read(r,"&")||null!==this.read(r,"H"););return r},t.prototype.parse_alpha=function(e){for(var t=new d(e);null!==this.read(t,"&")||null!==this.read(t,"H"););var r=this.parse_hexInt32(t);if(null===r)return e.pop(),null;var n=r.value;for(t.value=1-(255&n)/255;null!==this.read(t,"&")||null!==this.read(t,"H"););return t},t.prototype.parse_colorWithAlpha=function(t){var r=new d(t),n=this.parse_decimalOrHexInt32(r);if(null===n)return t.pop(),null;var i=n.value;return r.value=new e.Color(255&i,i>>8&255,i>>16&255,1-(i>>24&255)/255),r},t.prototype.read=function(e,t){return this.Vt(t.length)!==t?null:new d(e,t)},t.prototype.Vt=function(e){return void 0===e&&(e=1),1===e?this.Rt[this.Nt.end]:this.Rt.substr(this.Nt.end,e)},t.prototype.Xt=function(){return this.Nt.end<this.Rt.length},t.prototype.Lt=function(t,r){var n=new d(r);if(null===this.read(n,t))return r.pop(),null;if(null===this.read(n,"("))return r.pop(),null;var i=null,o=null,a=null,l=null,u=null,p=null,c=this.parse_decimal(n);if(null!==c){if(null===this.read(n,","))return r.pop(),null;var f=this.parse_decimal(n);null!==f?(i=c,a=f):u=c}if(null!==i&&null!==a){if(null===this.read(n,","))return r.pop(),null;if(null===(o=this.parse_decimal(n)))return r.pop(),null;if(null===this.read(n,","))return r.pop(),null;if(null===(l=this.parse_decimal(n)))return r.pop(),null;n.value=new e.RectangularClip(i.value,a.value,o.value,l.value,"clip"===t)}else{p=new d(n,"");for(var h=this.Vt();this.Xt()&&")"!==h&&"}"!==h;h=this.Vt())p.value+=h;n.value=new e.VectorClip(null!==u?u.value:1,s(p.value,"drawingInstructions"),"clip"===t)}return null===this.read(n,")")?(r.pop(),null):n},t}();l("alpha",e.Alpha,p.prototype.parse_alpha,!1),l("be",e.Blur,p.prototype.parse_decimal,!1),l("blur",e.GaussianBlur,p.prototype.parse_decimal,!1),l("bord",e.Border,p.prototype.parse_decimal,!1),l("c",e.PrimaryColor,p.prototype.parse_color,!1),l("fax",e.SkewX,p.prototype.parse_decimal,!1),l("fay",e.SkewY,p.prototype.parse_decimal,!1),l("fr",e.RotateZ,p.prototype.parse_decimal,!1),l("frx",e.RotateX,p.prototype.parse_decimal,!1),l("fry",e.RotateY,p.prototype.parse_decimal,!1),l("frz",e.RotateZ,p.prototype.parse_decimal,!1),l("fs",e.FontSize,p.prototype.parse_decimal,!1),l("fsp",e.LetterSpacing,p.prototype.parse_decimal,!1),l("i",e.Italic,p.prototype.parse_enableDisable,!1),l("p",e.DrawingMode,p.prototype.parse_decimal,!0),l("pbo",e.DrawingBaselineOffset,p.prototype.parse_decimal,!0),l("s",e.StrikeThrough,p.prototype.parse_enableDisable,!1),l("shad",e.Shadow,p.prototype.parse_decimal,!1),l("u",e.Underline,p.prototype.parse_enableDisable,!1),l("xbord",e.BorderX,p.prototype.parse_decimal,!1),l("xshad",e.ShadowX,p.prototype.parse_decimal,!1),l("ybord",e.BorderY,p.prototype.parse_decimal,!1),l("yshad",e.ShadowY,p.prototype.parse_decimal,!1),l("1a",e.PrimaryAlpha,p.prototype.parse_alpha,!1),l("1c",e.PrimaryColor,p.prototype.parse_color,!1),l("2a",e.SecondaryAlpha,p.prototype.parse_alpha,!1),l("2c",e.SecondaryColor,p.prototype.parse_color,!1),l("3a",e.OutlineAlpha,p.prototype.parse_alpha,!1),l("3c",e.OutlineColor,p.prototype.parse_color,!1),l("4a",e.ShadowAlpha,p.prototype.parse_alpha,!1),l("4c",e.ShadowColor,p.prototype.parse_color,!1);for(var c=0,f=Object.keys(p.prototype);c<f.length;c++){var h=f[c];0===h.indexOf("parse_")&&"function"==typeof p.prototype[h]&&u.set(h.substr("parse_".length),p.prototype[h])}var d=function(){function e(e,t){void 0===t&&(t=null),this.It=e,this.Yt=[],null!==e&&e.children.push(this),this.st=null!==e?e.end:0,this.lt=this.st,this.value=t}return Object.defineProperty(e.prototype,"start",{get:function(){return this.st},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.lt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.It},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.Yt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},set:function(e){this.zt=e,null!==this.zt&&this.zt.constructor===String&&0===this.Yt.length&&this.Bt(this.st+this.zt.length)},enumerable:!0,configurable:!0}),e.prototype.pop=function(){this.Yt.splice(this.Yt.length-1,1),this.Yt.length>0?this.Bt(this.Yt[this.Yt.length-1].end):this.Bt(this.start)},e.prototype.Bt=function(e){this.lt=e,null!==this.It&&this.It.end!==this.lt&&this.It.Bt(this.lt)},e}();o.registerWorkerCommand(i.WorkerCommands.Parse,function(e){return new n.Promise(function(t){t(s(e.input,e.rule))})})}),t("parts/index",["parts/drawing","serialization"],function(e,t,r){r.drawing=e;var n=function(){function e(e,t,r,n){void 0===n&&(n=1),this.Gt=e,this.qt=t,this.Ut=r,this.Ht=n}return Object.defineProperty(e.prototype,"red",{get:function(){return this.Gt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"green",{get:function(){return this.qt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blue",{get:function(){return this.Ut},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.Ht},enumerable:!0,configurable:!0}),e.prototype.withAlpha=function(t){return null!==t?new e(this.Gt,this.qt,this.Ut,t):this},e.prototype.toString=function(){return"rgba("+this.Gt+", "+this.qt+", "+this.Ut+", "+this.Ht.toFixed(3)+")"},e.prototype.interpolate=function(t,r){return new e(this.Gt+r*(t.red-this.Gt),this.qt+r*(t.green-this.qt),this.Ut+r*(t.blue-this.Ut),this.Ht+r*(t.alpha-this.Ht))},e}();r.Color=n;var i=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.Comment=i;var o=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Text { value: "+this.zt.replace(/\u00A0/g,"\\h")+" }"},e}();r.Text=o;var a=function(){function e(){}return e}();r.NewLine=a;var s=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.Italic=s;var l=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.Bold=l;var u=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.Underline=u;var p=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.StrikeThrough=p;var c=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.Border=c;var f=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.BorderX=f;var h=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.BorderY=h;var d=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.Shadow=d;var _=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.ShadowX=_;var g=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.ShadowY=g;var y=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.Blur=y;var m=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.GaussianBlur=m;var v=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.FontName=v;var b=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.FontSize=b;var w=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.FontSizePlus=w;var S=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.FontSizeMinus=S;var k=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.FontScaleX=k;var O=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.FontScaleY=O;var C=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.LetterSpacing=C;var P=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.RotateX=P;var x=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.RotateY=x;var E=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.RotateZ=E;var j=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.SkewX=j;var A=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.SkewY=A;var M=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.PrimaryColor=M;var F=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.SecondaryColor=F;var T=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.OutlineColor=T;var D=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.ShadowColor=D;var R=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.Alpha=R;var N=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.PrimaryAlpha=N;var W=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.SecondaryAlpha=W;var X=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.OutlineAlpha=X;var V=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.ShadowAlpha=V;var L=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.Alignment=L;var I=function(){function e(e){this.Kt=e}return Object.defineProperty(e.prototype,"duration",{get:function(){return this.Kt},enumerable:!0,configurable:!0}),e}();r.ColorKaraoke=I;var Y=function(){function e(e){this.Kt=e}return Object.defineProperty(e.prototype,"duration",{get:function(){return this.Kt},enumerable:!0,configurable:!0}),e}();r.SweepingColorKaraoke=Y;var z=function(){function e(e){this.Kt=e}return Object.defineProperty(e.prototype,"duration",{get:function(){return this.Kt},enumerable:!0,configurable:!0}),e}();r.OutlineKaraoke=z;var B=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.WrappingStyle=B;var G=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.Reset=G;var q=function(){function e(e,t){this.Zt=e,this.Jt=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this.Zt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.Jt},enumerable:!0,configurable:!0}),e}();r.Position=q;var U=function(){function e(e,t,r,n,i,o){this.$t=e,this.Qt=t,this.er=r,this.tr=n,this.rr=i,this.nr=o}return Object.defineProperty(e.prototype,"x1",{get:function(){return this.$t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.Qt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.er},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.tr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"t1",{get:function(){return this.rr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"t2",{get:function(){return this.nr},enumerable:!0,configurable:!0}),e}();r.Move=U;var H=function(){function e(e,t){this.Zt=e,this.Jt=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this.Zt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.Jt},enumerable:!0,configurable:!0}),e}();r.RotationOrigin=H;var K=function(){function e(e,t){this.st=e,this.lt=t}return Object.defineProperty(e.prototype,"start",{get:function(){return this.st},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.lt},enumerable:!0,configurable:!0}),e}();r.Fade=K;var Z=function(){function e(e,t,r,n,i,o,a){this.ir=e,this.or=t,this.ar=r,this.rr=n,this.nr=i,this.sr=o,this.lr=a}return Object.defineProperty(e.prototype,"a1",{get:function(){return this.ir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"a2",{get:function(){return this.or},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"a3",{get:function(){return this.ar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"t1",{get:function(){return this.rr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"t2",{get:function(){return this.nr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"t3",{get:function(){return this.sr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"t4",{get:function(){return this.lr},enumerable:!0,configurable:!0}),e}();r.ComplexFade=Z;var J=function(){function e(e,t,r,n){this.st=e,this.lt=t,this.ur=r,this.pr=n}return Object.defineProperty(e.prototype,"start",{get:function(){return this.st},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.lt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accel",{get:function(){return this.ur},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tags",{get:function(){return this.pr},enumerable:!0,configurable:!0}),e}();r.Transform=J;var $=function(){function e(e,t,r,n,i){this.$t=e,this.Qt=t,this.er=r,this.tr=n,this.cr=i}return Object.defineProperty(e.prototype,"x1",{get:function(){return this.$t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.Qt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.er},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.tr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inside",{get:function(){return this.cr},enumerable:!0,configurable:!0}),e}();r.RectangularClip=$;var Q=function(){function e(e,t,r){this.pe=e,this.fr=t,this.cr=r}return Object.defineProperty(e.prototype,"scale",{get:function(){return this.pe},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instructions",{get:function(){return this.fr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inside",{get:function(){return this.cr},enumerable:!0,configurable:!0}),e}();r.VectorClip=Q;var ee=function(){function e(e){this.pe=e}return Object.defineProperty(e.prototype,"scale",{get:function(){return this.pe},enumerable:!0,configurable:!0}),e}();r.DrawingMode=ee;var te=function(){function e(e){this.zt=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.zt},enumerable:!0,configurable:!0}),e}();r.DrawingBaselineOffset=te;var re=function(){function e(e){this.fr=e}return Object.defineProperty(e.prototype,"instructions",{get:function(){return this.fr},enumerable:!0,configurable:!0}),e}();r.DrawingInstructions=re;for(var ne=function(e,t){if(!e.prototype.hasOwnProperty("toString")){var r=Object.getOwnPropertyNames(e.prototype).filter(function(e){return"constructor"!==e});e.prototype.toString=function(){var e=this;return t+" { "+r.map(function(t){return t+": "+e[t]}).join(", ")+(r.length>0?" ":"")+"}"}}},ie=0,oe=Object.keys(r);ie<oe.length;ie++){var ae=oe[ie],se=r[ae];se instanceof Function&&(ne(se,ae),t.registerClass(se))}for(var le=0,ue=Object.keys(e);le<ue.length;le++){var ae=ue[le],se=e[ae];se instanceof Function&&(ne(se,"Drawing"+ae),t.registerClass(se))}}),t("parts/drawing",[],function(e){var t=function(){function e(e,t){this.Zt=e,this.Jt=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this.Zt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.Jt},enumerable:!0,configurable:!0}),e}();e.MoveInstruction=t;var r=function(){function e(e,t){this.Zt=e,this.Jt=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this.Zt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.Jt},enumerable:!0,configurable:!0}),e}();e.LineInstruction=r;var n=function(){function e(e,t,r,n,i,o){this.$t=e,this.Qt=t,this.er=r,this.tr=n,this.hr=i,this.dr=o}return Object.defineProperty(e.prototype,"x1",{get:function(){return this.$t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.Qt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.er},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.tr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x3",{get:function(){return this.hr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y3",{get:function(){return this.dr},enumerable:!0,configurable:!0}),e}();e.CubicBezierCurveInstruction=n}),t("types/misc",[],function(e){function t(e,t,r,n,i){var o=e.get(t);if(void 0===o)return r(i);try{var a=r(o);if(null!==n&&!n(a))throw new Error("Validation failed.");return a}catch(e){throw new Error("Property "+t+" has invalid value "+o+" - "+e.stack)}}!function(e){e[e.ASS=0]="ASS",e[e.SRT=1]="SRT"}(e.Format||(e.Format={})),function(e){e[e.SmartWrappingWithWiderTopLine=0]="SmartWrappingWithWiderTopLine",e[e.SmartWrappingWithWiderBottomLine=3]="SmartWrappingWithWiderBottomLine",e[e.EndOfLineWrapping=1]="EndOfLineWrapping",e[e.NoLineWrapping=2]="NoLineWrapping"}(e.WrappingStyle||(e.WrappingStyle={})),function(e){e[e.Outline=1]="Outline",e[e.OpaqueBox=3]="OpaqueBox"}(e.BorderStyle||(e.BorderStyle={})),e.valueOrDefault=t}),t("webworker/index",["webworker/channel","webworker/commands"],function(t,r,n){function i(e){if(void 0===e){if(null===o)throw new Error("Could not auto-detect path of libjass.js, and explicit path was not passed in.");e=o.src}return new t.WorkerChannelImpl(new Worker(e))}n.WorkerCommands=r.WorkerCommands,n.supported="undefined"!=typeof Worker;var o="undefined"!=typeof document&&void 0!==document.currentScript?document.currentScript:null;n.createWorker=i,"undefined"!=typeof WorkerGlobalScope&&e instanceof WorkerGlobalScope&&new t.WorkerChannelImpl(e)}),t("webworker/channel",["serialization","utility/map","utility/promise","webworker/commands","webworker/misc"],function(e,t,r,n,i,o){var a=function(){function o(e){var r=this;this._r=e,this.gr=new t.Map,this._r.addEventListener("message",function(e){return r.yr(e.data)},!1)}return o.prototype.request=function(t,n){var i=new r.DeferredPromise,a=++o.mr;this.gr.set(a,i);var s={requestId:a,command:t,parameters:n};return this._r.postMessage(e.serialize(s)),i.promise},o.prototype.cancelRequest=function(e){var t=this.gr.get(e);void 0!==t&&(this.gr.delete(e),t.reject(new Error("Cancelled.")))},o.prototype.vr=function(t){var r=t.requestId,i=t.error,o=t.result;i instanceof Error&&(i={message:i.message,stack:i.stack}),this._r.postMessage(e.serialize({command:n.WorkerCommands.Response,requestId:r,error:i,result:o}))},o.prototype.yr=function(t){var r=this,o=e.deserialize(t);if(o.command===n.WorkerCommands.Response){var a=o,s=this.gr.get(a.requestId);void 0!==s&&(this.gr.delete(a.requestId),null===a.error?s.resolve(a.result):s.reject(a.error))}else{var l=o,u=l.requestId,p=i.getWorkerCommandHandler(l.command);if(void 0===p)return void this.vr({requestId:u,error:new Error("No handler registered for command "+l.command),result:null});p(l.parameters).then(function(e){return{requestId:u,error:null,result:e}},function(e){return{requestId:u,error:e,result:null}}).then(function(e){return r.vr(e)})}},o.mr=-1,o}();o.WorkerChannelImpl=a,i.registerWorkerCommand(n.WorkerCommands.Ping,function(){return r.Promise.resolve(null)})}),t("webworker/misc",["utility/map"],function(e,t){function r(e,t){i.set(e,t)}function n(e){return i.get(e)}var i=new e.Map;t.registerWorkerCommand=r,t.getWorkerCommandHandler=n}),t("webworker/commands",[],function(e){!function(e){e[e.Response=0]="Response",e[e.Parse=1]="Parse",e[e.Ping=2]="Ping"}(e.WorkerCommands||(e.WorkerCommands={}))}),t("serialization",["utility/map"],function(e,t){function r(e){e.prototype.Qe=o.size,o.set(e.prototype.Qe,e)}function n(e){return JSON.stringify(e,function(e,t){return t&&void 0!==t.Qe&&!Object.prototype.hasOwnProperty.call(t,"_classTag")&&(t.Qe=t.Qe),t})}function i(e){return JSON.parse(e,function(e,t){if(t&&void 0!==t.Qe){var r=o.get(t.Qe);if(void 0===r)throw new Error("Unknown class of tag "+t.Qe+" cannot be deserialized.");if("function"==typeof r.fromJSON)t=r.fromJSON(t);else{for(var n=Object.create(r.prototype),i=0,a=Object.keys(t);i<a.length;i++){var s=a[i];n[s]=t[s]}t=n}}return t})}var o=new e.Map;t.registerClass=r,t.serialize=n,t.deserialize=i}),t("utility/promise",[],function(t){function r(e){t.Promise=null!==e?e:l}function n(e){return i(e,[])}function i(e,r){if(0===e.length)return t.Promise.reject(r);var n=e[0],o=e.slice(1);return n.catch(function(e){return i(o,r.concat(e))})}function o(e){return new t.Promise(function(r,n){return t.Promise.all(e.map(function(e){return e.then(r,function(e){return e})})).then(n)})}function a(e,t){return e.then(function(e){return t(),e},function(e){throw t(),e})}var s=function(){var t=e.MutationObserver||e.WebkitMutationObserver;if(void 0!==e.process&&"function"==typeof e.process.nextTick){var r=e.process;return function(e){r.nextTick(e)}}if(void 0!==t){var n=[],i=!1,o=document.createElement("div");return new t(function(){for(var e=n.splice(0,n.length),t=0,r=e;t<r.length;t++){(0,r[t])()}i=!1,n.length>0&&(o.classList.toggle("foo"),i=!0)}).observe(o,{attributes:!0}),function(e){n.push(e),i||(o.classList.toggle("foo"),i=!0)}}return function(e){return setTimeout(e,0)}}(),l=function(){function e(e){if(this.br=u.PENDING,this.wr=[],this.Sr=[],this.kr=null,this.Or=null,"function"!=typeof e)throw new TypeError('typeof executor !== "function"');var t=this.Cr(),r=t.resolve,n=t.reject;try{e(r,n)}catch(e){n(e)}}return e.resolve=function(r){return r instanceof e?r:new t.Promise(function(e){return e(r)})},e.reject=function(e){return new t.Promise(function(t,r){return r(e)})},e.all=function(e){return new t.Promise(function(r,n){var i=[],o=e.length;if(0===o)return void r(i);e.forEach(function(e,a){return t.Promise.resolve(e).then(function(e){i[a]=e,0===--o&&r(i)},n)})})},e.race=function(e){return new t.Promise(function(r,n){for(var i=0,o=e;i<o.length;i++){var a=o[i];t.Promise.resolve(a).then(r,n)}})},e.prototype.then=function(e,t){var r=new p;"function"!=typeof e&&(e=function(e){return e}),"function"!=typeof t&&(t=function(e){throw e});var n={capabilities:r,handler:e},i={capabilities:r,handler:t};switch(this.br){case u.PENDING:this.wr.push(n),this.Sr.push(i);break;case u.FULFILLED:this.Pr(n,this.kr);break;case u.REJECTED:this.xr(i,this.Or)}return r.promise},e.prototype.catch=function(e){return this.then(void 0,e)},e.prototype.Cr=function(){var e=this,t=!1;return{resolve:function(r){if(!t){if(t=!0,r===e)return void e.Er(new TypeError("resolution === this"));if(null===r||"object"!=typeof r&&"function"!=typeof r)return void e.jr(r);try{var n=r.then}catch(t){return void e.Er(t)}if("function"!=typeof n)return void e.jr(r);s(function(){return e.Ar(r,n)})}},reject:function(r){t||(t=!0,e.Er(r))}}},e.prototype.Ar=function(e,t){var r=this.Cr(),n=r.resolve,i=r.reject;try{t.call(e,n,i)}catch(e){i(e)}},e.prototype.jr=function(e){var t=this.wr;this.kr=e,this.wr=[],this.Sr=[],this.br=u.FULFILLED;for(var r=0,n=t;r<n.length;r++){var i=n[r];this.Pr(i,e)}},e.prototype.Er=function(e){var t=this.Sr;this.Or=e,this.wr=[],this.Sr=[],this.br=u.REJECTED;for(var r=0,n=t;r<n.length;r++){var i=n[r];this.xr(i,e)}},e.prototype.Pr=function(e,t){s(function(){var r,n=e.capabilities,i=n.resolve,o=n.reject,a=e.handler;try{r=a(t)}catch(e){return void o(e)}i(r)})},e.prototype.xr=function(e,t){s(function(){var r,n=e.capabilities,i=n.resolve,o=n.reject,a=e.handler;try{r=a(t)}catch(e){return void o(e)}i(r)})},e}();t.Promise=e.Promise||l;var u;!function(e){e[e.PENDING=0]="PENDING",e[e.FULFILLED=1]="FULFILLED",e[e.REJECTED=2]="REJECTED"}(u||(u={})),t.setImplementation=r;var p=function(){function e(){var e=this;this.Mr=new t.Promise(function(t,r){Object.defineProperties(e,{resolve:{value:t,enumerable:!0},reject:{value:r,enumerable:!0}})})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this.Mr},enumerable:!0,configurable:!0}),e}();t.DeferredPromise=p,t.first=n,t.any=o,t.lastly=a}),t("utility/map",[],function(t){function r(e){t.Map=null!==e?e:n}var n=function(){function e(e){if(this.clear(),void 0!==e){if(!Array.isArray(e))throw new Error("Non-array iterables are not supported by the SimpleMap constructor.");for(var t=0,r=e;t<r.length;t++){var n=r[t];this.set(n[0],n[1])}}}return e.prototype.get=function(e){var t=this.Fr(e);if(null!==t)return this.Tr[t]},e.prototype.has=function(e){var t=this.Fr(e);return null!==t&&t in this.Dr},e.prototype.set=function(e,t){var r=this.Fr(e);if(null===r)throw new Error("This Map implementation only supports Number and String keys, or keys with an id property.");return r in this.Dr||this.Rr++,this.Dr[r]=e,this.Tr[r]=t,this},e.prototype.delete=function(e){var t=this.Fr(e);if(null===t)return!1;var r=t in this.Dr;return r&&(delete this.Dr[t],delete this.Tr[t],this.Rr--),r},e.prototype.clear=function(){this.Dr=Object.create(null),this.Tr=Object.create(null),this.Rr=0},e.prototype.forEach=function(e,t){for(var r=0,n=Object.keys(this.Dr);r<n.length;r++){var i=n[r];e.call(t,this.Tr[i],this.Dr[i],this)}},Object.defineProperty(e.prototype,"size",{get:function(){return this.Rr},enumerable:!0,configurable:!0}),e.prototype.Fr=function(e){return"number"==typeof e?"#"+e:"string"==typeof e?"'"+e:void 0!==e.id?"!"+e.id:null},e}();t.Map=e.Map||n,("function"!=typeof t.Map.prototype.forEach||function(){try{return 2!==new t.Map([[1,"foo"],[2,"bar"]]).size}catch(e){return!0}}())&&(t.Map=n),t.setImplementation=r}),t("utility/set",[],function(t){function r(e){t.Set=null!==e?e:n}var n=function(){function e(e){if(this.clear(),void 0!==e){if(!Array.isArray(e))throw new Error("Non-array iterables are not supported by the SimpleSet constructor.");for(var t=0,r=e;t<r.length;t++){var n=r[t];this.add(n)}}}return e.prototype.add=function(e){var t=this.Nr(e);if(null===t)throw new Error("This Set implementation only supports Number and String values.");return t in this.Wr||this.Rr++,this.Wr[t]=e,this},e.prototype.clear=function(){this.Wr=Object.create(null),this.Rr=0},e.prototype.has=function(e){var t=this.Nr(e);return null!==t&&t in this.Wr},e.prototype.forEach=function(e,t){for(var r=0,n=Object.keys(this.Wr);r<n.length;r++){var i=n[r],o=this.Wr[i];e.call(t,o,o,this)}},Object.defineProperty(e.prototype,"size",{get:function(){return this.Rr},enumerable:!0,configurable:!0}),e.prototype.Nr=function(e){return"number"==typeof e?"#"+e:"string"==typeof e?"'"+e:null},e}();t.Set=e.Set||n,("function"!=typeof t.Set.prototype.forEach||function(){try{return 2!==new t.Set([1,2]).size}catch(e){return!0}}())&&(t.Set=n),t.setImplementation=r}),t("settings",[],function(e){function t(t){e.debugMode=t}function r(t){e.verboseMode=t}e.debugMode=!1,e.verboseMode=!1,e.setDebugMode=t,e.setVerboseMode=r}),r("index")});
//# sourceMappingURL=libjass.min.js.map